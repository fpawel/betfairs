// Code generated by github.com/gobuffalo/packr. DO NOT EDIT

package main

import "github.com/gobuffalo/packr"

// !!! GENERATED FILE !!!
// Do NOT hand edit this file!!
// It is recommended that you DO NOT check into this file into SCM.
// We STRONGLY recommend you delete this file after you have built your
// Go binary. You can use the "packr clean" command to clean up this,
// and any other packr generated files.
func init() {
		packr.PackJSONBytes("./../../../../../../Frontend/betfairf/dist", "index.html", "\"PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPg0KICAgIDx0aXRsZT7QpNGD0YLQsdC+0Ls8L3RpdGxlPg0KPC9oZWFkPg0KPGJvZHk+DQo8ZGl2IGlkPSJhcHAiPjwvZGl2Pg0KDQo8IS0tIHJlYWN0IERlcGVuZGVuY2llcyAtLT4NCjxzY3JpcHQgY3Jvc3NvcmlnaW4gc3JjPSJodHRwczovL3VucGtnLmNvbS9yZWFjdEAxNi91bWQvcmVhY3QuZGV2ZWxvcG1lbnQuanMiPjwvc2NyaXB0Pg0KPHNjcmlwdCBjcm9zc29yaWdpbiBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL3JlYWN0LWRvbUAxNi91bWQvcmVhY3QtZG9tLmRldmVsb3BtZW50LmpzIj48L3NjcmlwdD4NCg0KPCEtLSByZWFjdC10YWJsZSBDU1MgLS0+DQo8IS0tPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3VucGtnLmNvbS9yZWFjdC10YWJsZUBsYXRlc3QvcmVhY3QtdGFibGUuY3NzIj4tLT4NCg0KPCEtLSByZWFjdC10YWJsZSBKUyAtLT4NCjwhLS08c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vcmVhY3QtdGFibGVAbGF0ZXN0L3JlYWN0LXRhYmxlLmpzIj48L3NjcmlwdD4tLT4NCg0KPCEtLTxzY3JpcHQ+LS0+DQogICAgPCEtLWxldCBSZWFjdFRhYmxlID0gd2luZG93LlJlYWN0VGFibGUuZGVmYXVsdC0tPg0KPCEtLTwvc2NyaXB0Pi0tPg0KDQo8IS0tIE1haW4gLS0+DQo8c2NyaXB0IHNyYz0iLi9zY3JpcHRzL21haW4uanMiPjwvc2NyaXB0Pg0KPC9ib2R5Pg0KPC9odG1sPg==\"")
		packr.PackJSONBytes("./../../../../../../Frontend/betfairf/dist", "scripts/main.js", "\"LyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHsKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7Ci8qKioqKiovIAkJfQovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykgewovKioqKioqLyAJCWlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3QKLyoqKioqKi8gCS8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdAovKioqKioqLyAJLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zCi8qKioqKiovIAkvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3QKLyoqKioqKi8gCS8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7Ci8qKioqKiovIAkJaWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7Ci8qKioqKiovIAkJaWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTsKLyoqKioqKi8gCQlpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlOwovKioqKioqLyAJCXZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTsKLyoqKioqKi8gCQlPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7Ci8qKioqKiovIAkJaWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpOwovKioqKioqLyAJCXJldHVybiBuczsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7Ci8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07Ci8qKioqKiovCi8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIiI7Ci8qKioqKiovCi8qKioqKiovCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoewoKLyoqKi8gIi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zcmMvY29tcG9uZW50cy9Gb290YmFsbC9mb290YmFsbC5jc3MiOgovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9Gb290YmFsbC9mb290YmFsbC5jc3MgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMgKi8gIi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIikoZmFsc2UpOwovLyBpbXBvcnRzCgoKLy8gbW9kdWxlCmV4cG9ydHMucHVzaChbbW9kdWxlLmksICJ0YWJsZS5mb290YmFsbC10YWJsZSB7XHJcbiAgICBib3JkZXItc3BhY2luZzogMDtcclxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG50YWJsZS5mb290YmFsbC10YWJsZSB0aCB7XHJcbiAgICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gICAgdG9wOiAxcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG59XHJcbnRhYmxlLmZvb3RiYWxsLXRhYmxlIHRyOm50aC1jaGlsZChldmVuKSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTRlNGU0O1xyXG59XHJcbnRhYmxlLmZvb3RiYWxsLXRhYmxlIHRoLCB0YWJsZS5mb290YmFsbC10YWJsZSB0ZCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2JhYmFiYTtcclxuXHJcbiAgICBib3JkZXItcmlnaHQ6IHNvbGlkIDFweCAjYmFiYWJhO1xyXG4gICAgYm9yZGVyLWxlZnQ6IHNvbGlkIDFweCAjYmFiYWJhO1xyXG59XHJcblxyXG50YWJsZS5mb290YmFsbC10YWJsZSB0ZCB7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgcGFkZGluZzogMnB4IDRweDtcclxufVxyXG5cclxudGFibGUuZm9vdGJhbGwtdGFibGUgdGg6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2dyZXk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuIiwgIiJdKTsKCi8vIGV4cG9ydHMKCgovKioqLyB9KSwKCi8qKiovICIuL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyI6Ci8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8qCglNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAoJQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYQoqLwovLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlcgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkgewoJdmFyIGxpc3QgPSBbXTsKCgkvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nCglsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7CgkJcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CgkJCXZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApOwoJCQlpZihpdGVtWzJdKSB7CgkJCQlyZXR1cm4gIkBtZWRpYSAiICsgaXRlbVsyXSArICJ7IiArIGNvbnRlbnQgKyAifSI7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gY29udGVudDsKCQkJfQoJCX0pLmpvaW4oIiIpOwoJfTsKCgkvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdAoJbGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkgewoJCWlmKHR5cGVvZiBtb2R1bGVzID09PSAic3RyaW5nIikKCQkJbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgIiJdXTsKCQl2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9OwoJCWZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CgkJCXZhciBpZCA9IHRoaXNbaV1bMF07CgkJCWlmKHR5cGVvZiBpZCA9PT0gIm51bWJlciIpCgkJCQlhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7CgkJfQoJCWZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGl0ZW0gPSBtb2R1bGVzW2ldOwoJCQkvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlCgkJCS8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zCgkJCS8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuCgkJCS8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpCgkJCWlmKHR5cGVvZiBpdGVtWzBdICE9PSAibnVtYmVyIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkgewoJCQkJaWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkgewoJCQkJCWl0ZW1bMl0gPSBtZWRpYVF1ZXJ5OwoJCQkJfSBlbHNlIGlmKG1lZGlhUXVlcnkpIHsKCQkJCQlpdGVtWzJdID0gIigiICsgaXRlbVsyXSArICIpIGFuZCAoIiArIG1lZGlhUXVlcnkgKyAiKSI7CgkJCQl9CgkJCQlsaXN0LnB1c2goaXRlbSk7CgkJCX0KCQl9Cgl9OwoJcmV0dXJuIGxpc3Q7Cn07CgpmdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkgewoJdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOwoJdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdOwoJaWYgKCFjc3NNYXBwaW5nKSB7CgkJcmV0dXJuIGNvbnRlbnQ7Cgl9CgoJaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykgewoJCXZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpOwoJCXZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7CgkJCXJldHVybiAnLyojIHNvdXJjZVVSTD0nICsgY3NzTWFwcGluZy5zb3VyY2VSb290ICsgc291cmNlICsgJyAqLycKCQl9KTsKCgkJcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXG4nKTsKCX0KCglyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xuJyk7Cn0KCi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVCkKZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkgewoJLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCgl2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTsKCXZhciBkYXRhID0gJ3NvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCcgKyBiYXNlNjQ7CgoJcmV0dXJuICcvKiMgJyArIGRhdGEgKyAnICovJzsKfQoKCi8qKiovIH0pLAoKLyoqKi8gIi4vbm9kZV9tb2R1bGVzL3JlY29ubmVjdGluZ3dlYnNvY2tldC9yZWNvbm5lY3Rpbmctd2Vic29ja2V0LmpzIjoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9ub2RlX21vZHVsZXMvcmVjb25uZWN0aW5nd2Vic29ja2V0L3JlY29ubmVjdGluZy13ZWJzb2NrZXQuanMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187Ly8gTUlUIExpY2Vuc2U6Ci8vCi8vIENvcHlyaWdodCAoYykgMjAxMC0yMDEyLCBKb2UgV2FsbmVzCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwovLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwovLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgovLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQovLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KLy8gVEhFIFNPRlRXQVJFLgoKLyoqCiAqIFRoaXMgYmVoYXZlcyBsaWtlIGEgV2ViU29ja2V0IGluIGV2ZXJ5IHdheSwgZXhjZXB0IGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QsCiAqIG9yIGl0IGdldHMgZGlzY29ubmVjdGVkLCBpdCB3aWxsIHJlcGVhdGVkbHkgcG9sbCB1bnRpbCBpdCBzdWNjZXNzZnVsbHkgY29ubmVjdHMKICogYWdhaW4uCiAqCiAqIEl0IGlzIEFQSSBjb21wYXRpYmxlLCBzbyB3aGVuIHlvdSBoYXZlOgogKiAgIHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly8uLi4uJyk7CiAqIHlvdSBjYW4gcmVwbGFjZSB3aXRoOgogKiAgIHdzID0gbmV3IFJlY29ubmVjdGluZ1dlYlNvY2tldCgnd3M6Ly8uLi4uJyk7CiAqCiAqIFRoZSBldmVudCBzdHJlYW0gd2lsbCB0eXBpY2FsbHkgbG9vayBsaWtlOgogKiAgb25jb25uZWN0aW5nCiAqICBvbm9wZW4KICogIG9ubWVzc2FnZQogKiAgb25tZXNzYWdlCiAqICBvbmNsb3NlIC8vIGxvc3QgY29ubmVjdGlvbgogKiAgb25jb25uZWN0aW5nCiAqICBvbm9wZW4gIC8vIHNvbWV0aW1lIGxhdGVyLi4uCiAqICBvbm1lc3NhZ2UKICogIG9ubWVzc2FnZQogKiAgZXRjLi4uCiAqCiAqIEl0IGlzIEFQSSBjb21wYXRpYmxlIHdpdGggdGhlIHN0YW5kYXJkIFdlYlNvY2tldCBBUEksIGFwYXJ0IGZyb20gdGhlIGZvbGxvd2luZyBtZW1iZXJzOgogKgogKiAtIGBidWZmZXJlZEFtb3VudGAKICogLSBgZXh0ZW5zaW9uc2AKICogLSBgYmluYXJ5VHlwZWAKICoKICogTGF0ZXN0IHZlcnNpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9qb2V3YWxuZXMvcmVjb25uZWN0aW5nLXdlYnNvY2tldC8KICogLSBKb2UgV2FsbmVzCiAqCiAqIFN5bnRheAogKiA9PT09PT0KICogdmFyIHNvY2tldCA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQodXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpOwogKgogKiBQYXJhbWV0ZXJzCiAqID09PT09PT09PT0KICogdXJsIC0gVGhlIHVybCB5b3UgYXJlIGNvbm5lY3RpbmcgdG8uCiAqIHByb3RvY29scyAtIE9wdGlvbmFsIHN0cmluZyBvciBhcnJheSBvZiBwcm90b2NvbHMuCiAqIG9wdGlvbnMgLSBTZWUgYmVsb3cKICoKICogT3B0aW9ucwogKiA9PT09PT09CiAqIE9wdGlvbnMgY2FuIGVpdGhlciBiZSBwYXNzZWQgdXBvbiBpbnN0YW50aWF0aW9uIG9yIHNldCBhZnRlciBpbnN0YW50aWF0aW9uOgogKgogKiB2YXIgc29ja2V0ID0gbmV3IFJlY29ubmVjdGluZ1dlYlNvY2tldCh1cmwsIG51bGwsIHsgZGVidWc6IHRydWUsIHJlY29ubmVjdEludGVydmFsOiA0MDAwIH0pOwogKgogKiBvcgogKgogKiB2YXIgc29ja2V0ID0gbmV3IFJlY29ubmVjdGluZ1dlYlNvY2tldCh1cmwpOwogKiBzb2NrZXQuZGVidWcgPSB0cnVlOwogKiBzb2NrZXQucmVjb25uZWN0SW50ZXJ2YWwgPSA0MDAwOwogKgogKiBkZWJ1ZwogKiAtIFdoZXRoZXIgdGhpcyBpbnN0YW5jZSBzaG91bGQgbG9nIGRlYnVnIG1lc3NhZ2VzLiBBY2NlcHRzIHRydWUgb3IgZmFsc2UuIERlZmF1bHQ6IGZhbHNlLgogKgogKiBhdXRvbWF0aWNPcGVuCiAqIC0gV2hldGhlciBvciBub3QgdGhlIHdlYnNvY2tldCBzaG91bGQgYXR0ZW1wdCB0byBjb25uZWN0IGltbWVkaWF0ZWx5IHVwb24gaW5zdGFudGlhdGlvbi4gVGhlIHNvY2tldCBjYW4gYmUgbWFudWFsbHkgb3BlbmVkIG9yIGNsb3NlZCBhdCBhbnkgdGltZSB1c2luZyB3cy5vcGVuKCkgYW5kIHdzLmNsb3NlKCkuCiAqCiAqIHJlY29ubmVjdEludGVydmFsCiAqIC0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcmVjb25uZWN0LiBBY2NlcHRzIGludGVnZXIuIERlZmF1bHQ6IDEwMDAuCiAqCiAqIG1heFJlY29ubmVjdEludGVydmFsCiAqIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBhIHJlY29ubmVjdGlvbiBhdHRlbXB0LiBBY2NlcHRzIGludGVnZXIuIERlZmF1bHQ6IDMwMDAwLgogKgogKiByZWNvbm5lY3REZWNheQogKiAtIFRoZSByYXRlIG9mIGluY3JlYXNlIG9mIHRoZSByZWNvbm5lY3QgZGVsYXkuIEFsbG93cyByZWNvbm5lY3QgYXR0ZW1wdHMgdG8gYmFjayBvZmYgd2hlbiBwcm9ibGVtcyBwZXJzaXN0LiBBY2NlcHRzIGludGVnZXIgb3IgZmxvYXQuIERlZmF1bHQ6IDEuNS4KICoKICogdGltZW91dEludGVydmFsCiAqIC0gVGhlIG1heGltdW0gdGltZSBpbiBtaWxsaXNlY29uZHMgdG8gd2FpdCBmb3IgYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQgYmVmb3JlIGNsb3NpbmcgYW5kIHJldHJ5aW5nLiBBY2NlcHRzIGludGVnZXIuIERlZmF1bHQ6IDIwMDAuCiAqCiAqLwooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICAgaWYgKHRydWUpIHsKICAgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLAoJCQkJX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSAodHlwZW9mIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9PT0gJ2Z1bmN0aW9uJyA/CgkJCQkoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksCgkJCQlfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7CiAgICB9IGVsc2Uge30KfSkodGhpcywgZnVuY3Rpb24gKCkgewoKICAgIGlmICghKCdXZWJTb2NrZXQnIGluIHdpbmRvdykpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgZnVuY3Rpb24gUmVjb25uZWN0aW5nV2ViU29ja2V0KHVybCwgcHJvdG9jb2xzLCBvcHRpb25zKSB7CgogICAgICAgIC8vIERlZmF1bHQgc2V0dGluZ3MKICAgICAgICB2YXIgc2V0dGluZ3MgPSB7CgogICAgICAgICAgICAvKiogV2hldGhlciB0aGlzIGluc3RhbmNlIHNob3VsZCBsb2cgZGVidWcgbWVzc2FnZXMuICovCiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSwKCiAgICAgICAgICAgIC8qKiBXaGV0aGVyIG9yIG5vdCB0aGUgd2Vic29ja2V0IHNob3VsZCBhdHRlbXB0IHRvIGNvbm5lY3QgaW1tZWRpYXRlbHkgdXBvbiBpbnN0YW50aWF0aW9uLiAqLwogICAgICAgICAgICBhdXRvbWF0aWNPcGVuOiB0cnVlLAoKICAgICAgICAgICAgLyoqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGJlZm9yZSBhdHRlbXB0aW5nIHRvIHJlY29ubmVjdC4gKi8KICAgICAgICAgICAgcmVjb25uZWN0SW50ZXJ2YWw6IDEwMDAsCiAgICAgICAgICAgIC8qKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGEgcmVjb25uZWN0aW9uIGF0dGVtcHQuICovCiAgICAgICAgICAgIG1heFJlY29ubmVjdEludGVydmFsOiAzMDAwMCwKICAgICAgICAgICAgLyoqIFRoZSByYXRlIG9mIGluY3JlYXNlIG9mIHRoZSByZWNvbm5lY3QgZGVsYXkuIEFsbG93cyByZWNvbm5lY3QgYXR0ZW1wdHMgdG8gYmFjayBvZmYgd2hlbiBwcm9ibGVtcyBwZXJzaXN0LiAqLwogICAgICAgICAgICByZWNvbm5lY3REZWNheTogMS41LAoKICAgICAgICAgICAgLyoqIFRoZSBtYXhpbXVtIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgZm9yIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkIGJlZm9yZSBjbG9zaW5nIGFuZCByZXRyeWluZy4gKi8KICAgICAgICAgICAgdGltZW91dEludGVydmFsOiAyMDAwLAoKICAgICAgICAgICAgLyoqIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZWNvbm5lY3Rpb24gYXR0ZW1wdHMgdG8gbWFrZS4gVW5saW1pdGVkIGlmIG51bGwuICovCiAgICAgICAgICAgIG1heFJlY29ubmVjdEF0dGVtcHRzOiBudWxsCiAgICAgICAgfQogICAgICAgIGlmICghb3B0aW9ucykgeyBvcHRpb25zID0ge307IH0KCiAgICAgICAgLy8gT3ZlcndyaXRlIGFuZCBkZWZpbmUgc2V0dGluZ3Mgd2l0aCBvcHRpb25zIGlmIHRoZXkgZXhpc3QuCiAgICAgICAgZm9yICh2YXIga2V5IGluIHNldHRpbmdzKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc1trZXldICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgdGhpc1trZXldID0gb3B0aW9uc1trZXldOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpc1trZXldID0gc2V0dGluZ3Nba2V5XTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIGJlIHRyZWF0ZWQgYXMgcmVhZC1vbmx5IHByb3BlcnRpZXMKCiAgICAgICAgLyoqIFRoZSBVUkwgYXMgcmVzb2x2ZWQgYnkgdGhlIGNvbnN0cnVjdG9yLiBUaGlzIGlzIGFsd2F5cyBhbiBhYnNvbHV0ZSBVUkwuIFJlYWQgb25seS4gKi8KICAgICAgICB0aGlzLnVybCA9IHVybDsKCiAgICAgICAgLyoqIFRoZSBudW1iZXIgb2YgYXR0ZW1wdGVkIHJlY29ubmVjdHMgc2luY2Ugc3RhcnRpbmcsIG9yIHRoZSBsYXN0IHN1Y2Nlc3NmdWwgY29ubmVjdGlvbi4gUmVhZCBvbmx5LiAqLwogICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwOwoKICAgICAgICAvKioKICAgICAgICAgKiBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY29ubmVjdGlvbi4KICAgICAgICAgKiBDYW4gYmUgb25lIG9mOiBXZWJTb2NrZXQuQ09OTkVDVElORywgV2ViU29ja2V0Lk9QRU4sIFdlYlNvY2tldC5DTE9TSU5HLCBXZWJTb2NrZXQuQ0xPU0VECiAgICAgICAgICogUmVhZCBvbmx5LgogICAgICAgICAqLwogICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HOwoKICAgICAgICAvKioKICAgICAgICAgKiBBIHN0cmluZyBpbmRpY2F0aW5nIHRoZSBuYW1lIG9mIHRoZSBzdWItcHJvdG9jb2wgdGhlIHNlcnZlciBzZWxlY3RlZDsgdGhpcyB3aWxsIGJlIG9uZSBvZgogICAgICAgICAqIHRoZSBzdHJpbmdzIHNwZWNpZmllZCBpbiB0aGUgcHJvdG9jb2xzIHBhcmFtZXRlciB3aGVuIGNyZWF0aW5nIHRoZSBXZWJTb2NrZXQgb2JqZWN0LgogICAgICAgICAqIFJlYWQgb25seS4KICAgICAgICAgKi8KICAgICAgICB0aGlzLnByb3RvY29sID0gbnVsbDsKCiAgICAgICAgLy8gUHJpdmF0ZSBzdGF0ZSB2YXJpYWJsZXMKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHZhciB3czsKICAgICAgICB2YXIgZm9yY2VkQ2xvc2UgPSBmYWxzZTsKICAgICAgICB2YXIgdGltZWRPdXQgPSBmYWxzZTsKICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCiAgICAgICAgLy8gV2lyZSB1cCAib24qIiBwcm9wZXJ0aWVzIGFzIGV2ZW50IGhhbmRsZXJzCgogICAgICAgIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAgICAgICBmdW5jdGlvbihldmVudCkgeyBzZWxmLm9ub3BlbihldmVudCk7IH0pOwogICAgICAgIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgICAgICBmdW5jdGlvbihldmVudCkgeyBzZWxmLm9uY2xvc2UoZXZlbnQpOyB9KTsKICAgICAgICBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0aW5nJywgZnVuY3Rpb24oZXZlbnQpIHsgc2VsZi5vbmNvbm5lY3RpbmcoZXZlbnQpOyB9KTsKICAgICAgICBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgICAgZnVuY3Rpb24oZXZlbnQpIHsgc2VsZi5vbm1lc3NhZ2UoZXZlbnQpOyB9KTsKICAgICAgICBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICAgICAgZnVuY3Rpb24oZXZlbnQpIHsgc2VsZi5vbmVycm9yKGV2ZW50KTsgfSk7CgogICAgICAgIC8vIEV4cG9zZSB0aGUgQVBJIHJlcXVpcmVkIGJ5IEV2ZW50VGFyZ2V0CgogICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIuYmluZChldmVudFRhcmdldCk7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyID0gZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKGV2ZW50VGFyZ2V0KTsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQgPSBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50LmJpbmQoZXZlbnRUYXJnZXQpOwoKICAgICAgICAvKioKICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyBhbiBldmVudCB0aGF0IGlzIGNvbXBhdGlibGUgd2l0aCBzdGFuZGFyZAogICAgICAgICAqIGNvbXBsaWFudCBicm93c2VycyBhbmQgSUU5IC0gSUUxMQogICAgICAgICAqCiAgICAgICAgICogVGhpcyB3aWxsIHByZXZlbnQgdGhlIGVycm9yOgogICAgICAgICAqIE9iamVjdCBkb2Vzbid0IHN1cHBvcnQgdGhpcyBhY3Rpb24KICAgICAgICAgKgogICAgICAgICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTkzNDUzOTIvd2h5LWFyZW50LW15LXBhcmFtZXRlcnMtZ2V0dGluZy1wYXNzZWQtdGhyb3VnaC10by1hLWRpc3BhdGNoZWQtZXZlbnQvMTkzNDU1NjMjMTkzNDU1NjMKICAgICAgICAgKiBAcGFyYW0gcyBTdHJpbmcgVGhlIG5hbWUgdGhhdCB0aGUgZXZlbnQgc2hvdWxkIHVzZQogICAgICAgICAqIEBwYXJhbSBhcmdzIE9iamVjdCBhbiBvcHRpb25hbCBvYmplY3QgdGhhdCB0aGUgZXZlbnQgd2lsbCB1c2UKICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50KHMsIGFyZ3MpIHsKICAgICAgICAJdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJDdXN0b21FdmVudCIpOwogICAgICAgIAlldnQuaW5pdEN1c3RvbUV2ZW50KHMsIGZhbHNlLCBmYWxzZSwgYXJncyk7CiAgICAgICAgCXJldHVybiBldnQ7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5vcGVuID0gZnVuY3Rpb24gKHJlY29ubmVjdEF0dGVtcHQpIHsKICAgICAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHNlbGYudXJsLCBwcm90b2NvbHMgfHwgW10pOwoKICAgICAgICAgICAgaWYgKHJlY29ubmVjdEF0dGVtcHQpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzICYmIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPiB0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChnZW5lcmF0ZUV2ZW50KCdjb25uZWN0aW5nJykpOwogICAgICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkgewogICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUmVjb25uZWN0aW5nV2ViU29ja2V0JywgJ2F0dGVtcHQtY29ubmVjdCcsIHNlbGYudXJsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGxvY2FsV3MgPSB3czsKICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHNlbGYuZGVidWcgfHwgUmVjb25uZWN0aW5nV2ViU29ja2V0LmRlYnVnQWxsKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUmVjb25uZWN0aW5nV2ViU29ja2V0JywgJ2Nvbm5lY3Rpb24tdGltZW91dCcsIHNlbGYudXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRpbWVkT3V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGxvY2FsV3MuY2xvc2UoKTsKICAgICAgICAgICAgICAgIHRpbWVkT3V0ID0gZmFsc2U7CiAgICAgICAgICAgIH0sIHNlbGYudGltZW91dEludGVydmFsKTsKCiAgICAgICAgICAgIHdzLm9ub3BlbiA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kZWJ1ZyB8fCBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuZGVidWdBbGwpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdSZWNvbm5lY3RpbmdXZWJTb2NrZXQnLCAnb25vcGVuJywgc2VsZi51cmwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VsZi5wcm90b2NvbCA9IHdzLnByb3RvY29sOwogICAgICAgICAgICAgICAgc2VsZi5yZWFkeVN0YXRlID0gV2ViU29ja2V0Lk9QRU47CiAgICAgICAgICAgICAgICBzZWxmLnJlY29ubmVjdEF0dGVtcHRzID0gMDsKICAgICAgICAgICAgICAgIHZhciBlID0gZ2VuZXJhdGVFdmVudCgnb3BlbicpOwogICAgICAgICAgICAgICAgZS5pc1JlY29ubmVjdCA9IHJlY29ubmVjdEF0dGVtcHQ7CiAgICAgICAgICAgICAgICByZWNvbm5lY3RBdHRlbXB0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgd3Mub25jbG9zZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgICAgICAgICAgICB3cyA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAoZm9yY2VkQ2xvc2UpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0VEOwogICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZ2VuZXJhdGVFdmVudCgnY2xvc2UnKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNlbGYucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gZ2VuZXJhdGVFdmVudCgnY29ubmVjdGluZycpOwogICAgICAgICAgICAgICAgICAgIGUuY29kZSA9IGV2ZW50LmNvZGU7CiAgICAgICAgICAgICAgICAgICAgZS5yZWFzb24gPSBldmVudC5yZWFzb247CiAgICAgICAgICAgICAgICAgICAgZS53YXNDbGVhbiA9IGV2ZW50Lndhc0NsZWFuOwogICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWNvbm5lY3RBdHRlbXB0ICYmICF0aW1lZE91dCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kZWJ1ZyB8fCBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuZGVidWdBbGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1JlY29ubmVjdGluZ1dlYlNvY2tldCcsICdvbmNsb3NlJywgc2VsZi51cmwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZ2VuZXJhdGVFdmVudCgnY2xvc2UnKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgdGltZW91dCA9IHNlbGYucmVjb25uZWN0SW50ZXJ2YWwgKiBNYXRoLnBvdyhzZWxmLnJlY29ubmVjdERlY2F5LCBzZWxmLnJlY29ubmVjdEF0dGVtcHRzKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY29ubmVjdEF0dGVtcHRzKys7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3Blbih0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9LCB0aW1lb3V0ID4gc2VsZi5tYXhSZWNvbm5lY3RJbnRlcnZhbCA/IHNlbGYubWF4UmVjb25uZWN0SW50ZXJ2YWwgOiB0aW1lb3V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgd3Mub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1JlY29ubmVjdGluZ1dlYlNvY2tldCcsICdvbm1lc3NhZ2UnLCBzZWxmLnVybCwgZXZlbnQuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgZSA9IGdlbmVyYXRlRXZlbnQoJ21lc3NhZ2UnKTsKICAgICAgICAgICAgICAgIGUuZGF0YSA9IGV2ZW50LmRhdGE7CiAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB3cy5vbmVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1JlY29ubmVjdGluZ1dlYlNvY2tldCcsICdvbmVycm9yJywgc2VsZi51cmwsIGV2ZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZ2VuZXJhdGVFdmVudCgnZXJyb3InKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAvLyBXaGV0aGVyIG9yIG5vdCB0byBjcmVhdGUgYSB3ZWJzb2NrZXQgdXBvbiBpbnN0YW50aWF0aW9uCiAgICAgICAgaWYgKHRoaXMuYXV0b21hdGljT3BlbiA9PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMub3BlbihmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBUcmFuc21pdHMgZGF0YSB0byB0aGUgc2VydmVyIG92ZXIgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGRhdGEgYSB0ZXh0IHN0cmluZywgQXJyYXlCdWZmZXIgb3IgQmxvYiB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuCiAgICAgICAgICovCiAgICAgICAgdGhpcy5zZW5kID0gZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICBpZiAod3MpIHsKICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1JlY29ubmVjdGluZ1dlYlNvY2tldCcsICdzZW5kJywgc2VsZi51cmwsIGRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHdzLnNlbmQoZGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyAnSU5WQUxJRF9TVEFURV9FUlIgOiBQYXVzaW5nIHRvIHJlY29ubmVjdCB3ZWJzb2NrZXQnOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvc2VzIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBvciBjb25uZWN0aW9uIGF0dGVtcHQsIGlmIGFueS4KICAgICAgICAgKiBJZiB0aGUgY29ubmVjdGlvbiBpcyBhbHJlYWR5IENMT1NFRCwgdGhpcyBtZXRob2QgZG9lcyBub3RoaW5nLgogICAgICAgICAqLwogICAgICAgIHRoaXMuY2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHsKICAgICAgICAgICAgLy8gRGVmYXVsdCBDTE9TRV9OT1JNQUwgY29kZQogICAgICAgICAgICBpZiAodHlwZW9mIGNvZGUgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGNvZGUgPSAxMDAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvcmNlZENsb3NlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKHdzKSB7CiAgICAgICAgICAgICAgICB3cy5jbG9zZShjb2RlLCByZWFzb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQWRkaXRpb25hbCBwdWJsaWMgQVBJIG1ldGhvZCB0byByZWZyZXNoIHRoZSBjb25uZWN0aW9uIGlmIHN0aWxsIG9wZW4gKGNsb3NlLCByZS1vcGVuKS4KICAgICAgICAgKiBGb3IgZXhhbXBsZSwgaWYgdGhlIGFwcCBzdXNwZWN0cyBiYWQgZGF0YSAvIG1pc3NlZCBoZWFydCBiZWF0cywgaXQgY2FuIHRyeSB0byByZWZyZXNoLgogICAgICAgICAqLwogICAgICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAod3MpIHsKICAgICAgICAgICAgICAgIHdzLmNsb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIC8qKgogICAgICogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uJ3MgcmVhZHlTdGF0ZSBjaGFuZ2VzIHRvIE9QRU47CiAgICAgKiB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIHJlYWR5IHRvIHNlbmQgYW5kIHJlY2VpdmUgZGF0YS4KICAgICAqLwogICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5vbm9wZW4gPSBmdW5jdGlvbihldmVudCkge307CiAgICAvKiogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uJ3MgcmVhZHlTdGF0ZSBjaGFuZ2VzIHRvIENMT1NFRC4gKi8KICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUub25jbG9zZSA9IGZ1bmN0aW9uKGV2ZW50KSB7fTsKICAgIC8qKiBBbiBldmVudCBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiBhIGNvbm5lY3Rpb24gYmVnaW5zIGJlaW5nIGF0dGVtcHRlZC4gKi8KICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUub25jb25uZWN0aW5nID0gZnVuY3Rpb24oZXZlbnQpIHt9OwogICAgLyoqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuICovCiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7fTsKICAgIC8qKiBBbiBldmVudCBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMuICovCiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbihldmVudCkge307CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIGFsbCBpbnN0YW5jZXMgb2YgUmVjb25uZWN0aW5nV2ViU29ja2V0IHNob3VsZCBsb2cgZGVidWcgbWVzc2FnZXMuCiAgICAgKiBTZXR0aW5nIHRoaXMgdG8gdHJ1ZSBpcyB0aGUgZXF1aXZhbGVudCBvZiBzZXR0aW5nIGFsbCBpbnN0YW5jZXMgb2YgUmVjb25uZWN0aW5nV2ViU29ja2V0LmRlYnVnIHRvIHRydWUuCiAgICAgKi8KICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCA9IGZhbHNlOwoKICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DT05ORUNUSU5HID0gV2ViU29ja2V0LkNPTk5FQ1RJTkc7CiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuT1BFTiA9IFdlYlNvY2tldC5PUEVOOwogICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LkNMT1NJTkcgPSBXZWJTb2NrZXQuQ0xPU0lORzsKICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5DTE9TRUQgPSBXZWJTb2NrZXQuQ0xPU0VEOwoKICAgIHJldHVybiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQ7Cn0pOwoKCi8qKiovIH0pLAoKLyoqKi8gIi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIjoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyoKCU1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwCglBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhCiovCgp2YXIgc3R5bGVzSW5Eb20gPSB7fTsKCnZhcgltZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7Cgl2YXIgbWVtbzsKCglyZXR1cm4gZnVuY3Rpb24gKCkgewoJCWlmICh0eXBlb2YgbWVtbyA9PT0gInVuZGVmaW5lZCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCXJldHVybiBtZW1vOwoJfTsKfTsKCnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7CgkvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrcwoJLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNQoJLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlcgoJLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzCgkvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzcKCXJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjsKfSk7Cgp2YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkgewogIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7Cn07Cgp2YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHsKCXZhciBtZW1vID0ge307CgoJcmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkgewogICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSAiaGVhZCIgZWxlbWVudC4KICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lCiAgICAgICAgICAgICAgICAvLyB7CiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNmb28iKS5zaGFkb3dSb290IH0KICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAidW5kZWZpbmVkIikgewoJCQl2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQpOwoJCQkvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZgoJCQlpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7CgkJCQl0cnkgewoJCQkJCS8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkCgkJCQkJLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnMKCQkJCQlzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkOwoJCQkJfSBjYXRjaChlKSB7CgkJCQkJc3R5bGVUYXJnZXQgPSBudWxsOwoJCQkJfQoJCQl9CgkJCW1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0OwoJCX0KCQlyZXR1cm4gbWVtb1t0YXJnZXRdCgl9Owp9KSgpOwoKdmFyIHNpbmdsZXRvbiA9IG51bGw7CnZhcglzaW5nbGV0b25Db3VudGVyID0gMDsKdmFyCXN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTsKCnZhcglmaXhVcmxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91cmxzICovICIuL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykgewoJaWYgKHR5cGVvZiBERUJVRyAhPT0gInVuZGVmaW5lZCIgJiYgREVCVUcpIHsKCQlpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAib2JqZWN0IikgdGhyb3cgbmV3IEVycm9yKCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQiKTsKCX0KCglvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCglvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09ICJvYmplY3QiID8gb3B0aW9ucy5hdHRycyA6IHt9OwoKCS8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPgoJLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZQoJaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICJib29sZWFuIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7CgoJLy8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnQKICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gImhlYWQiOwoKCS8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0CglpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSAiYm90dG9tIjsKCgl2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpOwoKCWFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7CgoJcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkgewoJCXZhciBtYXlSZW1vdmUgPSBbXTsKCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGl0ZW0gPSBzdHlsZXNbaV07CgkJCXZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdOwoKCQkJZG9tU3R5bGUucmVmcy0tOwoJCQltYXlSZW1vdmUucHVzaChkb21TdHlsZSk7CgkJfQoKCQlpZihuZXdMaXN0KSB7CgkJCXZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7CgkJCWFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7CgkJfQoKCQlmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykgewoJCQl2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07CgoJCQlpZihkb21TdHlsZS5yZWZzID09PSAwKSB7CgkJCQlmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpOwoKCQkJCWRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07CgkJCX0KCQl9Cgl9Owp9OwoKZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykgewoJZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHsKCQl2YXIgaXRlbSA9IHN0eWxlc1tpXTsKCQl2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTsKCgkJaWYoZG9tU3R5bGUpIHsKCQkJZG9tU3R5bGUucmVmcysrOwoKCQkJZm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7CgkJCQlkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTsKCQkJfQoKCQkJZm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHsKCQkJCWRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpOwoJCQl9CgkJfSBlbHNlIHsKCQkJdmFyIHBhcnRzID0gW107CgoJCQlmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykgewoJCQkJcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7CgkJCX0KCgkJCXN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9OwoJCX0KCX0KfQoKZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7Cgl2YXIgc3R5bGVzID0gW107Cgl2YXIgbmV3U3R5bGVzID0ge307CgoJZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgkJdmFyIGl0ZW0gPSBsaXN0W2ldOwoJCXZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdOwoJCXZhciBjc3MgPSBpdGVtWzFdOwoJCXZhciBtZWRpYSA9IGl0ZW1bMl07CgkJdmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107CgkJdmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9OwoKCQlpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTsKCQllbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTsKCX0KCglyZXR1cm4gc3R5bGVzOwp9CgpmdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7Cgl2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pCgoJaWYgKCF0YXJnZXQpIHsKCQl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuIik7Cgl9CgoJdmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdOwoKCWlmIChvcHRpb25zLmluc2VydEF0ID09PSAidG9wIikgewoJCWlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHsKCQkJdGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpOwoJCX0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHsKCQkJdGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpOwoJCX0gZWxzZSB7CgkJCXRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7CgkJfQoJCXN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7Cgl9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09ICJib3R0b20iKSB7CgkJdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTsKCX0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09ICJvYmplY3QiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7CgkJdmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyAiICIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7CgkJdGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpOwoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXJyb3IoIltTdHlsZSBMb2FkZXJdXG5cbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcbiIpOwoJfQp9CgpmdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7CglpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7CgoJdmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7CglpZihpZHggPj0gMCkgewoJCXN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7Cgl9Cn0KCmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykgewoJdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKCglpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkgewoJCW9wdGlvbnMuYXR0cnMudHlwZSA9ICJ0ZXh0L2NzcyI7Cgl9CgoJYWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpOwoJaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTsKCglyZXR1cm4gc3R5bGU7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7Cgl2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKCglpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkgewoJCW9wdGlvbnMuYXR0cnMudHlwZSA9ICJ0ZXh0L2NzcyI7Cgl9CglvcHRpb25zLmF0dHJzLnJlbCA9ICJzdHlsZXNoZWV0IjsKCglhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTsKCWluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTsKCglyZXR1cm4gbGluazsKfQoKZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykgewoJT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewoJCWVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pOwoJfSk7Cn0KCmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHsKCXZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDsKCgkvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3MKCWlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7CgkgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7CgoJICAgIGlmIChyZXN1bHQpIHsKCSAgICAJLy8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLgoJICAgIAkvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuCgkgICAgCW9iai5jc3MgPSByZXN1bHQ7CgkgICAgfSBlbHNlIHsKCSAgICAJLy8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy4KCSAgICAJLy8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3MKCSAgICAJcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgIAkJLy8gbm9vcAoJICAgIAl9OwoJICAgIH0KCX0KCglpZiAob3B0aW9ucy5zaW5nbGV0b24pIHsKCQl2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKzsKCgkJc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7CgoJCXVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpOwoJCXJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7CgoJfSBlbHNlIGlmICgKCQlvYmouc291cmNlTWFwICYmCgkJdHlwZW9mIFVSTCA9PT0gImZ1bmN0aW9uIiAmJgoJCXR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSAiZnVuY3Rpb24iICYmCgkJdHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09ICJmdW5jdGlvbiIgJiYKCQl0eXBlb2YgQmxvYiA9PT0gImZ1bmN0aW9uIiAmJgoJCXR5cGVvZiBidG9hID09PSAiZnVuY3Rpb24iCgkpIHsKCQlzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpOwoJCXVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7CgkJcmVtb3ZlID0gZnVuY3Rpb24gKCkgewoJCQlyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpOwoKCQkJaWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTsKCQl9OwoJfSBlbHNlIHsKCQlzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTsKCQl1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpOwoJCXJlbW92ZSA9IGZ1bmN0aW9uICgpIHsKCQkJcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTsKCQl9OwoJfQoKCXVwZGF0ZShvYmopOwoKCXJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7CgkJaWYgKG5ld09iaikgewoJCQlpZiAoCgkJCQluZXdPYmouY3NzID09PSBvYmouY3NzICYmCgkJCQluZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJgoJCQkJbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcAoJCQkpIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJdXBkYXRlKG9iaiA9IG5ld09iaik7CgkJfSBlbHNlIHsKCQkJcmVtb3ZlKCk7CgkJfQoJfTsKfQoKdmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHsKCXZhciB0ZXh0U3RvcmUgPSBbXTsKCglyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkgewoJCXRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDsKCgkJcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXG4nKTsKCX07Cn0pKCk7CgpmdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7Cgl2YXIgY3NzID0gcmVtb3ZlID8gIiIgOiBvYmouY3NzOwoKCWlmIChzdHlsZS5zdHlsZVNoZWV0KSB7CgkJc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7Cgl9IGVsc2UgewoJCXZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTsKCQl2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7CgoJCWlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pOwoKCQlpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHsKCQkJc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTsKCQl9IGVsc2UgewoJCQlzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTsKCQl9Cgl9Cn0KCmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHsKCXZhciBjc3MgPSBvYmouY3NzOwoJdmFyIG1lZGlhID0gb2JqLm1lZGlhOwoKCWlmKG1lZGlhKSB7CgkJc3R5bGUuc2V0QXR0cmlidXRlKCJtZWRpYSIsIG1lZGlhKQoJfQoKCWlmKHN0eWxlLnN0eWxlU2hlZXQpIHsKCQlzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7Cgl9IGVsc2UgewoJCXdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHsKCQkJc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7CgkJfQoKCQlzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTsKCX0KfQoKZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7Cgl2YXIgY3NzID0gb2JqLmNzczsKCXZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwOwoKCS8qCgkJSWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkCgkJYW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMKCQlvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb24KCQlkaXJlY3RseQoJKi8KCXZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwOwoKCWlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykgewoJCWNzcyA9IGZpeFVybHMoY3NzKTsKCX0KCglpZiAoc291cmNlTWFwKSB7CgkJLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzUKCQljc3MgKz0gIlxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArICIgKi8iOwoJfQoKCXZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogInRleHQvY3NzIiB9KTsKCgl2YXIgb2xkU3JjID0gbGluay5ocmVmOwoKCWxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CgoJaWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7Cn0KCgovKioqLyB9KSwKCi8qKiovICIuL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiOgovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoKLyoqCiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvCiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGEKICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS4KICoKICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuCiAqCiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gImZpeGVzIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi4KICoKICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuCiAqCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7CiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb24KICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiAmJiB3aW5kb3cubG9jYXRpb247CgogIGlmICghbG9jYXRpb24pIHsKICAgIHRocm93IG5ldyBFcnJvcigiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb24iKTsKICB9CgoJLy8gYmxhbmsgb3IgbnVsbD8KCWlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09ICJzdHJpbmciKSB7CgkgIHJldHVybiBjc3M7CiAgfQoKICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3Q7CiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXC9bXlwvXSokLywgIi8iKTsKCgkvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLikKCS8qCglUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpbgoJYSBzdHJpbmcuCgoJIC91cmxccypcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCAidXJsIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zCgkgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwCgkgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXAKCSAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlcwoJICAgICAgICAgfCAgPSBPUgoJICAgICAgICAgXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlcwoJICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzCgkgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXMKCSAgICAgICAgICAgICAgICAgfCAgPSBPUgoJICAgICAgICAgICAgICAgICBcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzCgkgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzCgkgICAgICAgICAgICAgICAgIFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzCgkgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXAKICAgICAgICAgICAgICAqXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVucwogICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwCiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nCiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cAoJIFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zCgoJIC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLgoJICovCgl2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXHMqXCgoKD86W14pKF18XCgoPzpbXikoXSt8XChbXikoXSpcKSkqXCkpKilcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7CgkJLy8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KQoJCXZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsCgkJCS50cmltKCkKCQkJLnJlcGxhY2UoL14iKC4qKSIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pCgkJCS5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTsKCgkJLy8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2UKCQlpZiAoL14oI3xkYXRhOnxodHRwOlwvXC98aHR0cHM6XC9cL3xmaWxlOlwvXC9cL3xccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkgewoJCSAgcmV0dXJuIGZ1bGxNYXRjaDsKCQl9CgoJCS8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsCgkJdmFyIG5ld1VybDsKCgkJaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKCIvLyIpID09PSAwKSB7CgkJICAJLy9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sPwoJCQluZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7CgkJfSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZigiLyIpID09PSAwKSB7CgkJCS8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybAoJCQluZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJwoJCX0gZWxzZSB7CgkJCS8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5CgkJCW5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlwuXC8vLCAiIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJwoJCX0KCgkJLy8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKQoJCXJldHVybiAidXJsKCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgIikiOwoJfSk7CgoJLy8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3MKCXJldHVybiBmaXhlZENzczsKfTsKCgovKioqLyB9KSwKCi8qKiovICIuL3NyYy9jb21wb25lbnRzL0Zvb3RiYWxsL0Zvb3RiYWxsLnRzeCI6Ci8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvRm9vdGJhbGwudHN4ICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKDQp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7DQogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwNCiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fA0KICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsNCiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsNCiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsNCiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9DQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsNCiAgICB9Ow0KfSkoKTsNCnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkgew0KICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgew0KICAgICAgICBzID0gYXJndW1lbnRzW2ldOw0KICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpDQogICAgICAgICAgICB0W3BdID0gc1twXTsNCiAgICB9DQogICAgcmV0dXJuIHQ7DQp9Ow0KdmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7DQogICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDsNCiAgICB2YXIgcmVzdWx0ID0ge307DQogICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTsNCiAgICByZXN1bHRbImRlZmF1bHQiXSA9IG1vZDsNCiAgICByZXR1cm4gcmVzdWx0Ow0KfTsNCnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkgew0KICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgImRlZmF1bHQiOiBtb2QgfTsNCn07DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOw0KdmFyIFJlYWN0ID0gX19pbXBvcnRTdGFyKF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlYWN0ICovICJyZWFjdCIpKTsNCnZhciBnYW1lXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dhbWUgKi8gIi4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvZ2FtZS50cyIpOw0KdmFyIHJlY29ubmVjdGluZ3dlYnNvY2tldF8xID0gX19pbXBvcnREZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIHJlY29ubmVjdGluZ3dlYnNvY2tldCAqLyAiLi9ub2RlX21vZHVsZXMvcmVjb25uZWN0aW5nd2Vic29ja2V0L3JlY29ubmVjdGluZy13ZWJzb2NrZXQuanMiKSk7DQp2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3V0aWxzL3V0aWxzICovICIuL3NyYy91dGlscy91dGlscy50cyIpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9mb290YmFsbC5jc3MgKi8gIi4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvZm9vdGJhbGwuY3NzIik7DQp2YXIgQ29sOw0KKGZ1bmN0aW9uIChDb2wpIHsNCiAgICBDb2xbIm9yZGVyIl0gPSAib3JkZXIiOw0KICAgIENvbFsiaG9tZSJdID0gImhvbWUiOw0KICAgIENvbFsic2NvcmUiXSA9ICJzY29yZSI7DQogICAgQ29sWyJhd2F5Il0gPSAiYXdheSI7DQogICAgQ29sWyJ0aW1lIl0gPSAidGltZSI7DQogICAgQ29sWyJjb21wZXRpdGlvbiJdID0gImNvbXBldGl0aW9uIjsNCiAgICBDb2xbImNvdW50cnkiXSA9ICJjb3VudHJ5IjsNCiAgICBDb2xbInRvdGFsX21hdGNoZWQiXSA9ICJ0b3RhbF9tYXRjaGVkIjsNCiAgICBDb2xbInRvdGFsX2F2YWlsYWJsZSJdID0gInRvdGFsX2F2YWlsYWJsZSI7DQogICAgQ29sWyJ3aW5fYmFjayJdID0gIndpbl9iYWNrIjsNCiAgICBDb2xbIndpbl9sYXkiXSA9ICJ3aW5fbGF5IjsNCiAgICBDb2xbImRyYXdfYmFjayJdID0gImRyYXdfYmFjayI7DQogICAgQ29sWyJkcmF3X2xheSJdID0gImRyYXdfbGF5IjsNCiAgICBDb2xbImxvc2VfYmFjayJdID0gImxvc2VfYmFjayI7DQogICAgQ29sWyJsb3NlX2xheSJdID0gImxvc2VfbGF5IjsNCn0pKENvbCB8fCAoQ29sID0ge30pKTsNCnZhciBjb2xzID0gT2JqZWN0LmtleXMoQ29sKS5tYXAoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGs7IH0pOw0KdmFyIHJlbmRlckNvZWZmaWNpZW50ID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYgPyAiIiArIHYgOiAnJzsgfTsNCnZhciByZW5kZXJEb2xsYXIgPSBmdW5jdGlvbiAodikgeyByZXR1cm4gdiA/IHYgKyAiJCIgOiAnJzsgfTsNCnZhciBsZWZ0QWxpZ25JdGFsaWMgPSB7DQogICAgdGV4dEFsaWduOiAicmlnaHQiLA0KICAgIGZvbnRTdHlsZTogIml0YWxpYyIsDQp9Ow0KdmFyIGNvbF9pbmZvID0gZnVuY3Rpb24gKHgpIHsNCiAgICBzd2l0Y2ggKHgpIHsNCiAgICAgICAgY2FzZSBDb2wub3JkZXI6DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHRpdGxlOiAn4oSWJywNCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgub3JkZXIgKyAxOyB9LA0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wuaG9tZToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQlNC+0LzQsCcsDQogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmhvbWU7IH0sDQogICAgICAgICAgICAgICAgc3R5bGU6IHsgdGV4dEFsaWduOiAiY2VudGVyIiB9DQogICAgICAgICAgICB9Ow0KICAgICAgICBjYXNlIENvbC5hd2F5Og0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICB0aXRsZTogJ9CSINCz0L7RgdGC0Y/RhScsDQogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmF3YXk7IH0sDQogICAgICAgICAgICAgICAgc3R5bGU6IHsgdGV4dEFsaWduOiAiY2VudGVyIiB9DQogICAgICAgICAgICB9Ow0KICAgICAgICBjYXNlIENvbC5zY29yZToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQodGH0ZHRgicsDQogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmluX3BsYXkgPyB4LnNjb3JlX2hvbWUgKyAiIC0gIiArIHguc2NvcmVfYXdheSA6ICcnOyB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiB7IHRleHRBbGlnbjogImNlbnRlciIgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wudGltZToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQktGA0LXQvNGPJywNCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudGltZTsgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogeyB0ZXh0QWxpZ246ICJjZW50ZXIiIH0NCiAgICAgICAgICAgIH07DQogICAgICAgIGNhc2UgQ29sLmNvbXBldGl0aW9uOg0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICB0aXRsZTogJ9Cn0LXQvNC/0LjQvtC90LDRgicsDQogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmNvbXBldGl0aW9uOyB9LA0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wuY291bnRyeToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQodGC0YDQsNC90LAnLA0KICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5jb3VudHJ5OyB9LA0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wudG90YWxfbWF0Y2hlZDoNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQkiDQv9Cw0YDQtScsDQogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICh4KSB7IHJldHVybiByZW5kZXJEb2xsYXIoeC50b3RhbF9tYXRjaGVkKTsgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogbGVmdEFsaWduSXRhbGljLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wudG90YWxfYXZhaWxhYmxlOg0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICB0aXRsZTogJ9Cd0LUg0LIg0L/QsNGA0LUnLA0KICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmVuZGVyRG9sbGFyKHgudG90YWxfYXZhaWxhYmxlKTsgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogbGVmdEFsaWduSXRhbGljLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wud2luX2JhY2s6DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHRpdGxlOiAn0J8xKycsDQogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICh4KSB7IHJldHVybiByZW5kZXJDb2VmZmljaWVudCh4Lndpbl9iYWNrKTsgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogbGVmdEFsaWduSXRhbGljLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgY2FzZSBDb2wud2luX2xheToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQnzEtJywNCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHJlbmRlckNvZWZmaWNpZW50KHgud2luX2xheSk7IH0sDQogICAgICAgICAgICAgICAgc3R5bGU6IGxlZnRBbGlnbkl0YWxpYywNCiAgICAgICAgICAgIH07DQogICAgICAgIGNhc2UgQ29sLmRyYXdfYmFjazoNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQnSsnLA0KICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmVuZGVyQ29lZmZpY2llbnQoeC5kcmF3X2JhY2spOyB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiBsZWZ0QWxpZ25JdGFsaWMsDQogICAgICAgICAgICB9Ow0KICAgICAgICBjYXNlIENvbC5kcmF3X2xheToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQnS0nLA0KICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmVuZGVyQ29lZmZpY2llbnQoeC5kcmF3X2xheSk7IH0sDQogICAgICAgICAgICAgICAgc3R5bGU6IGxlZnRBbGlnbkl0YWxpYywNCiAgICAgICAgICAgIH07DQogICAgICAgIGNhc2UgQ29sLmxvc2VfYmFjazoNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQnzIrJywNCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHJlbmRlckNvZWZmaWNpZW50KHgubG9zZV9sYXkpOyB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiBsZWZ0QWxpZ25JdGFsaWMsDQogICAgICAgICAgICB9Ow0KICAgICAgICBjYXNlIENvbC5sb3NlX2xheToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfQnzItJywNCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHJlbmRlckNvZWZmaWNpZW50KHgubG9zZV9sYXkpOyB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiBsZWZ0QWxpZ25JdGFsaWMsDQogICAgICAgICAgICB9Ow0KICAgIH0NCn07DQp2YXIgRm9vdGJhbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7DQogICAgX19leHRlbmRzKEZvb3RiYWxsLCBfc3VwZXIpOw0KICAgIGZ1bmN0aW9uIEZvb3RiYWxsKHByb3BzKSB7DQogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzOw0KICAgICAgICBfdGhpcy5zdGF0ZSA9IF90aGlzLmluaXQoKTsNCiAgICAgICAgX3RoaXMucmVuZGVySGVhZENlbGwgPSBfdGhpcy5yZW5kZXJIZWFkQ2VsbC5iaW5kKF90aGlzKTsNCiAgICAgICAgcmV0dXJuIF90aGlzOw0KICAgIH0NCiAgICBGb290YmFsbC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgdmFyIHdzID0gbmV3IHJlY29ubmVjdGluZ3dlYnNvY2tldF8xLmRlZmF1bHQodXRpbHNfMS53ZWJTb2NrZXRVUkwoJy9mb290YmFsbCcpLCBbXSwgew0KICAgICAgICAgICAgZGVidWc6IHRydWUsDQogICAgICAgICAgICBhdXRvbWF0aWNPcGVuOiBmYWxzZSwNCiAgICAgICAgfSk7DQogICAgICAgIHdzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHgpIHsNCiAgICAgICAgICAgICAgICB2YXIgdiA9IGdhbWVfMS5hcHBseV9nYW1lc19jaGFuZ2VzKHguZ2FtZXMsIG5ldyBnYW1lXzEuR2FtZXNDaGFuZ2VzKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkpKTsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Iodik7DQogICAgICAgICAgICAgICAgICAgIHgud3MuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmluaXQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKHt9LCB4LCB7IGdhbWVzOiB2IH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH07DQogICAgICAgIHdzLm9wZW4oKTsNCiAgICAgICAgdGhpcy5zdGF0ZSA9IHsNCiAgICAgICAgICAgIHdzOiB3cywNCiAgICAgICAgICAgIGdhbWVzOiBbXSwNCiAgICAgICAgICAgIHNvcnRfY29sOiBDb2wub3JkZXIsDQogICAgICAgICAgICBzb3J0X2RpcjogJ2FzYycsDQogICAgICAgIH07DQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlOw0KICAgIH07DQogICAgRm9vdGJhbGwucmVuZGVyQ2VsbCA9IGZ1bmN0aW9uIChjLCB4KSB7DQogICAgICAgIHZhciBhID0gY29sX2luZm8oYyk7DQogICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsga2V5OiBjLCBzdHlsZTogX19hc3NpZ24oe30sIGEuc3R5bGUpIH0sIGEudmFsdWUoeCkpOw0KICAgIH07DQogICAgRm9vdGJhbGwucHJvdG90eXBlLnJlbmRlckhlYWRDZWxsID0gZnVuY3Rpb24gKGMpIHsNCiAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgdmFyIGEgPSBjb2xfaW5mbyhjKTsNCiAgICAgICAgdmFyIF9hID0gdGhpcy5zdGF0ZS5zb3J0X2NvbCA9PT0gYw0KICAgICAgICAgICAgPyBbdGhpcy5zdGF0ZS5zb3J0X2RpciA9PT0gJ2FzYycgPyAn4oaTJyA6ICfihpEnLCAncmdiKDg1LCA4NSwgODUpJ10NCiAgICAgICAgICAgIDogWyfihpUnLCAncmdiKDIwNCwgMjA0LCAyMDQpJ10sIGNoID0gX2FbMF0sIGNvbG9yID0gX2FbMV07DQogICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIHsga2V5OiBjLCBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShfX2Fzc2lnbih7fSwgX3RoaXMuc3RhdGUsIHsgc29ydF9jb2w6IGMsIHNvcnRfZGlyOiBfdGhpcy5zdGF0ZS5zb3J0X2RpciA9PT0gJ2FzYycgPyAnZGVzYycgOiAnYXNjJyB9KSk7DQogICAgICAgICAgICB9LCBzdHlsZTogeyBjdXJzb3I6ICdwb2ludGVyJyB9IH0sDQogICAgICAgICAgICBhLnRpdGxlLA0KICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgc3R5bGU6IHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGNvbG9yLA0KICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCcsDQogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxNiwNCiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ2NhbGlicmksIGhlbHZldGljYSwgYXJpYWwsIHNhbnMtc2VyaWYnDQogICAgICAgICAgICAgICAgfSB9LCBjaCkpOw0KICAgIH07DQogICAgRm9vdGJhbGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgdmFyIHNvcnRGdW4gPSBjb2xfaW5mbyh0aGlzLnN0YXRlLnNvcnRfY29sKS52YWx1ZTsNCiAgICAgICAgdmFyIGdhbWVzID0gdGhpcy5zdGF0ZS5nYW1lcy5zbGljZSgpOw0KICAgICAgICBnYW1lcy5zb3J0KGZ1bmN0aW9uICh4LCB5KSB7DQogICAgICAgICAgICB2YXIgYSA9IHNvcnRGdW4oeCk7DQogICAgICAgICAgICB2YXIgYiA9IHNvcnRGdW4oeSk7DQogICAgICAgICAgICByZXR1cm4gKChhIDwgYikgPyAtMSA6IChhID4gYikgPyAxIDogMCkgKiAoX3RoaXMuc3RhdGUuc29ydF9kaXIgPT09ICdhc2MnID8gMSA6IC0xKTsNCiAgICAgICAgfSk7DQogICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIsIHsgY2xhc3NOYW1lOiAnZm9vdGJhbGwtdGFibGUnIH0sDQogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIsIG51bGwsDQogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCBjb2xzLm1hcCh0aGlzLnJlbmRlckhlYWRDZWxsKSkpLA0KICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCBnYW1lcy5tYXAoZnVuY3Rpb24gKHgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCB7IGtleTogeC5pZCB9LCBjb2xzLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gRm9vdGJhbGwucmVuZGVyQ2VsbChjLCB4KTsgfSkpOw0KICAgICAgICAgICAgfSkpKTsNCiAgICB9Ow0KICAgIHJldHVybiBGb290YmFsbDsNCn0oUmVhY3QuQ29tcG9uZW50KSk7DQpleHBvcnRzLkZvb3RiYWxsID0gRm9vdGJhbGw7DQoKCi8qKiovIH0pLAoKLyoqKi8gIi4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvZm9vdGJhbGwuY3NzIjoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvY29tcG9uZW50cy9Gb290YmFsbC9mb290YmFsbC5jc3MgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCnZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyIS4vZm9vdGJhbGwuY3NzICovICIuL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvZm9vdGJhbGwuY3NzIik7CgppZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pLCBjb250ZW50LCAnJ11dOwoKdmFyIHRyYW5zZm9ybTsKdmFyIGluc2VydEludG87CgoKCnZhciBvcHRpb25zID0geyJobXIiOnRydWV9CgpvcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybQpvcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7Cgp2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzICovICIuL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIpKGNvbnRlbnQsIG9wdGlvbnMpOwoKaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7CgppZihmYWxzZSkge30KCi8qKiovIH0pLAoKLyoqKi8gIi4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvZ2FtZS50cyI6Ci8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL3NyYy9jb21wb25lbnRzL0Zvb3RiYWxsL2dhbWUudHMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOw0KdmFyIGdvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3V0aWxzL2dvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnMgKi8gIi4vc3JjL3V0aWxzL2dvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnMudHMiKTsNCi8vIHN0cnVjdDJ0czpnaXRodWIuY29tL2ZwYXdlbC9iZXRmYWlycy9mb290YmFsbC9mb290YmFsbDIuR2FtZQ0KdmFyIEdhbWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgZnVuY3Rpb24gR2FtZShkYXRhKSB7DQogICAgICAgIHZhciBkID0gKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSA/IGdvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnNfMS5Ub09iamVjdChkYXRhKSA6IHt9Ow0KICAgICAgICB0aGlzLmlkID0gKCdpZCcgaW4gZCkgPyBkLmlkIDogMDsNCiAgICAgICAgdGhpcy5vcmRlciA9ICgnb3JkZXInIGluIGQpID8gZC5vcmRlciA6IDA7DQogICAgICAgIHRoaXMuaG9tZSA9ICgnaG9tZScgaW4gZCkgPyBkLmhvbWUgOiAnJzsNCiAgICAgICAgdGhpcy5hd2F5ID0gKCdhd2F5JyBpbiBkKSA/IGQuYXdheSA6ICcnOw0KICAgICAgICB0aGlzLnNjb3JlX2hvbWUgPSAoJ3Njb3JlX2hvbWUnIGluIGQpID8gZC5zY29yZV9ob21lIDogMDsNCiAgICAgICAgdGhpcy5zY29yZV9hd2F5ID0gKCdzY29yZV9hd2F5JyBpbiBkKSA/IGQuc2NvcmVfYXdheSA6IDA7DQogICAgICAgIHRoaXMuaW5fcGxheSA9ICgnaW5fcGxheScgaW4gZCkgPyBkLmluX3BsYXkgOiBmYWxzZTsNCiAgICAgICAgdGhpcy50aW1lID0gKCd0aW1lJyBpbiBkKSA/IGQudGltZSA6ICcnOw0KICAgICAgICB0aGlzLmNvbXBldGl0aW9uID0gKCdjb21wZXRpdGlvbicgaW4gZCkgPyBkLmNvbXBldGl0aW9uIDogJyc7DQogICAgICAgIHRoaXMuY291bnRyeSA9ICgnY291bnRyeScgaW4gZCkgPyBkLmNvdW50cnkgOiAnJzsNCiAgICAgICAgdGhpcy5vcGVuX2RhdGUgPSAoJ29wZW5fZGF0ZScgaW4gZCkgPyBnb2xhbmdfdHlwZXNjcmlwdGlmeV9oZWxwZXJzXzEuUGFyc2VEYXRlKGQub3Blbl9kYXRlKSA6IG5ldyBEYXRlKCk7DQogICAgICAgIHRoaXMud2luX2JhY2sgPSAoJ3dpbl9iYWNrJyBpbiBkKSA/IGQud2luX2JhY2sgOiAwOw0KICAgICAgICB0aGlzLndpbl9sYXkgPSAoJ3dpbl9sYXknIGluIGQpID8gZC53aW5fbGF5IDogMDsNCiAgICAgICAgdGhpcy5sb3NlX2JhY2sgPSAoJ2xvc2VfYmFjaycgaW4gZCkgPyBkLmxvc2VfYmFjayA6IDA7DQogICAgICAgIHRoaXMubG9zZV9sYXkgPSAoJ2xvc2VfbGF5JyBpbiBkKSA/IGQubG9zZV9sYXkgOiAwOw0KICAgICAgICB0aGlzLmRyYXdfYmFjayA9ICgnZHJhd19iYWNrJyBpbiBkKSA/IGQuZHJhd19iYWNrIDogMDsNCiAgICAgICAgdGhpcy5kcmF3X2xheSA9ICgnZHJhd19sYXknIGluIGQpID8gZC5kcmF3X2xheSA6IDA7DQogICAgICAgIHRoaXMudG90YWxfbWF0Y2hlZCA9ICgndG90YWxfbWF0Y2hlZCcgaW4gZCkgPyBkLnRvdGFsX21hdGNoZWQgOiAwOw0KICAgICAgICB0aGlzLnRvdGFsX2F2YWlsYWJsZSA9ICgndG90YWxfYXZhaWxhYmxlJyBpbiBkKSA/IGQudG90YWxfYXZhaWxhYmxlIDogMDsNCiAgICAgICAgdGhpcy5lcnJvciA9ICgnZXJyb3InIGluIGQpID8gZC5lcnJvciA6ICcnOw0KICAgIH0NCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2FtZS5wcm90b3R5cGUsICJTY29yZSIsIHsNCiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5pbl9wbGF5ID8gdGhpcy5zY29yZV9ob21lICsgIiAtICIgKyB0aGlzLnNjb3JlX2F3YXkgOiAnJzsNCiAgICAgICAgfSwNCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwNCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlDQogICAgfSk7DQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdhbWUucHJvdG90eXBlLCAiT3JkZXIiLCB7DQogICAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JkZXIgKyAxOw0KICAgICAgICB9LA0KICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLA0KICAgICAgICBjb25maWd1cmFibGU6IHRydWUNCiAgICB9KTsNCiAgICBHYW1lLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGNmZyA9IHt9Ow0KICAgICAgICBjZmcuaWQgPSAnbnVtYmVyJzsNCiAgICAgICAgY2ZnLm9yZGVyID0gJ251bWJlcic7DQogICAgICAgIGNmZy5zY29yZV9ob21lID0gJ251bWJlcic7DQogICAgICAgIGNmZy5zY29yZV9hd2F5ID0gJ251bWJlcic7DQogICAgICAgIGNmZy5vcGVuX2RhdGUgPSAnc3RyaW5nJzsNCiAgICAgICAgY2ZnLndpbl9iYWNrID0gJ251bWJlcic7DQogICAgICAgIGNmZy53aW5fbGF5ID0gJ251bWJlcic7DQogICAgICAgIGNmZy5sb3NlX2JhY2sgPSAnbnVtYmVyJzsNCiAgICAgICAgY2ZnLmxvc2VfbGF5ID0gJ251bWJlcic7DQogICAgICAgIGNmZy5kcmF3X2JhY2sgPSAnbnVtYmVyJzsNCiAgICAgICAgY2ZnLmRyYXdfbGF5ID0gJ251bWJlcic7DQogICAgICAgIGNmZy50b3RhbF9tYXRjaGVkID0gJ251bWJlcic7DQogICAgICAgIGNmZy50b3RhbF9hdmFpbGFibGUgPSAnbnVtYmVyJzsNCiAgICAgICAgcmV0dXJuIGdvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnNfMS5Ub09iamVjdCh0aGlzLCBjZmcpOw0KICAgIH07DQogICAgR2FtZS5wcm90b3R5cGUuYXBwbHlHYW1lQ2hhbmdlcyA9IGZ1bmN0aW9uIChhKSB7DQogICAgICAgIGlmIChhLm9yZGVyKQ0KICAgICAgICAgICAgdGhpcy5vcmRlciA9IGEub3JkZXI7DQogICAgICAgIGlmIChhLnNjb3JlX2hvbWUpDQogICAgICAgICAgICB0aGlzLnNjb3JlX2hvbWUgPSBhLnNjb3JlX2hvbWU7DQogICAgICAgIGlmIChhLnNjb3JlX2F3YXkpDQogICAgICAgICAgICB0aGlzLnNjb3JlX2F3YXkgPSBhLnNjb3JlX2F3YXk7DQogICAgICAgIGlmIChhLmluX3BsYXkpDQogICAgICAgICAgICB0aGlzLmluX3BsYXkgPSBhLmluX3BsYXk7DQogICAgICAgIGlmIChhLnRpbWUpDQogICAgICAgICAgICB0aGlzLnRpbWUgPSBhLnRpbWU7DQogICAgICAgIGlmIChhLmNvbXBldGl0aW9uKQ0KICAgICAgICAgICAgdGhpcy5jb21wZXRpdGlvbiA9IGEuY29tcGV0aXRpb247DQogICAgICAgIGlmIChhLmNvdW50cnkpDQogICAgICAgICAgICB0aGlzLmNvdW50cnkgPSBhLmNvdW50cnk7DQogICAgICAgIGlmIChhLndpbl9iYWNrKQ0KICAgICAgICAgICAgdGhpcy53aW5fYmFjayA9IGEud2luX2JhY2s7DQogICAgICAgIGlmIChhLndpbl9sYXkpDQogICAgICAgICAgICB0aGlzLndpbl9sYXkgPSBhLndpbl9sYXk7DQogICAgICAgIGlmIChhLmRyYXdfYmFjaykNCiAgICAgICAgICAgIHRoaXMuZHJhd19iYWNrID0gYS5kcmF3X2JhY2s7DQogICAgICAgIGlmIChhLmRyYXdfbGF5KQ0KICAgICAgICAgICAgdGhpcy5kcmF3X2xheSA9IGEuZHJhd19sYXk7DQogICAgICAgIGlmIChhLmxvc2VfYmFjaykNCiAgICAgICAgICAgIHRoaXMubG9zZV9iYWNrID0gYS5sb3NlX2JhY2s7DQogICAgICAgIGlmIChhLmxvc2VfbGF5KQ0KICAgICAgICAgICAgdGhpcy5sb3NlX2xheSA9IGEubG9zZV9sYXk7DQogICAgICAgIGlmIChhLnRvdGFsX21hdGNoZWQpDQogICAgICAgICAgICB0aGlzLnRvdGFsX21hdGNoZWQgPSBhLnRvdGFsX21hdGNoZWQ7DQogICAgICAgIGlmIChhLnRvdGFsX2F2YWlsYWJsZSkNCiAgICAgICAgICAgIHRoaXMudG90YWxfYXZhaWxhYmxlID0gYS50b3RhbF9hdmFpbGFibGU7DQogICAgICAgIGlmIChhLmVycm9yKQ0KICAgICAgICAgICAgdGhpcy5lcnJvciA9IGEuZXJyb3I7DQogICAgfTsNCiAgICA7DQogICAgcmV0dXJuIEdhbWU7DQp9KCkpOw0KZXhwb3J0cy5HYW1lID0gR2FtZTsNCi8vIHN0cnVjdDJ0czpnaXRodWIuY29tL2ZwYXdlbC9iZXRmYWlycy9mb290YmFsbC9mb290YmFsbDIuR2FtZUNoYW5nZXMNCnZhciBHYW1lQ2hhbmdlcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICBmdW5jdGlvbiBHYW1lQ2hhbmdlcyhkYXRhKSB7DQogICAgICAgIHZhciBkID0gKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSA/IGdvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnNfMS5Ub09iamVjdChkYXRhKSA6IHt9Ow0KICAgICAgICB0aGlzLmlkID0gKCdpZCcgaW4gZCkgPyBkLmlkIDogMDsNCiAgICAgICAgdGhpcy5vcmRlciA9ICgnb3JkZXInIGluIGQpID8gZC5vcmRlciA6IG51bGw7DQogICAgICAgIHRoaXMuc2NvcmVfaG9tZSA9ICgnc2NvcmVfaG9tZScgaW4gZCkgPyBkLnNjb3JlX2hvbWUgOiBudWxsOw0KICAgICAgICB0aGlzLnNjb3JlX2F3YXkgPSAoJ3Njb3JlX2F3YXknIGluIGQpID8gZC5zY29yZV9hd2F5IDogbnVsbDsNCiAgICAgICAgdGhpcy5pbl9wbGF5ID0gKCdpbl9wbGF5JyBpbiBkKSA/IGQuaW5fcGxheSA6IG51bGw7DQogICAgICAgIHRoaXMudGltZSA9ICgndGltZScgaW4gZCkgPyBkLnRpbWUgOiBudWxsOw0KICAgICAgICB0aGlzLmNvbXBldGl0aW9uID0gKCdjb21wZXRpdGlvbicgaW4gZCkgPyBkLmNvbXBldGl0aW9uIDogbnVsbDsNCiAgICAgICAgdGhpcy5jb3VudHJ5ID0gKCdjb3VudHJ5JyBpbiBkKSA/IGQuY291bnRyeSA6IG51bGw7DQogICAgICAgIHRoaXMud2luX2JhY2sgPSAoJ3dpbl9iYWNrJyBpbiBkKSA/IGQud2luX2JhY2sgOiBudWxsOw0KICAgICAgICB0aGlzLndpbl9sYXkgPSAoJ3dpbl9sYXknIGluIGQpID8gZC53aW5fbGF5IDogbnVsbDsNCiAgICAgICAgdGhpcy5kcmF3X2xheSA9ICgnZHJhd19sYXknIGluIGQpID8gZC5kcmF3X2xheSA6IG51bGw7DQogICAgICAgIHRoaXMuZHJhd19iYWNrID0gKCdkcmF3X2JhY2snIGluIGQpID8gZC5kcmF3X2JhY2sgOiBudWxsOw0KICAgICAgICB0aGlzLmxvc2VfbGF5ID0gKCdsb3NlX2xheScgaW4gZCkgPyBkLmxvc2VfbGF5IDogbnVsbDsNCiAgICAgICAgdGhpcy5sb3NlX2JhY2sgPSAoJ2xvc2VfYmFjaycgaW4gZCkgPyBkLmxvc2VfYmFjayA6IG51bGw7DQogICAgICAgIHRoaXMudG90YWxfbWF0Y2hlZCA9ICgndG90YWxfbWF0Y2hlZCcgaW4gZCkgPyBkLnRvdGFsX21hdGNoZWQgOiBudWxsOw0KICAgICAgICB0aGlzLnRvdGFsX2F2YWlsYWJsZSA9ICgndG90YWxfYXZhaWxhYmxlJyBpbiBkKSA/IGQudG90YWxfYXZhaWxhYmxlIDogbnVsbDsNCiAgICAgICAgdGhpcy5lcnJvciA9ICgnZXJyb3InIGluIGQpID8gZC5lcnJvciA6IG51bGw7DQogICAgfQ0KICAgIEdhbWVDaGFuZ2VzLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGNmZyA9IHt9Ow0KICAgICAgICBjZmcuaWQgPSAnbnVtYmVyJzsNCiAgICAgICAgY2ZnLm9yZGVyID0gJ251bWJlcic7DQogICAgICAgIGNmZy5zY29yZV9ob21lID0gJ251bWJlcic7DQogICAgICAgIGNmZy5zY29yZV9hd2F5ID0gJ251bWJlcic7DQogICAgICAgIGNmZy53aW5fYmFjayA9ICdudW1iZXInOw0KICAgICAgICBjZmcud2luX2xheSA9ICdudW1iZXInOw0KICAgICAgICBjZmcuZHJhd19sYXkgPSAnbnVtYmVyJzsNCiAgICAgICAgY2ZnLmRyYXdfYmFjayA9ICdudW1iZXInOw0KICAgICAgICBjZmcubG9zZV9sYXkgPSAnbnVtYmVyJzsNCiAgICAgICAgY2ZnLmxvc2VfYmFjayA9ICdudW1iZXInOw0KICAgICAgICBjZmcudG90YWxfbWF0Y2hlZCA9ICdudW1iZXInOw0KICAgICAgICBjZmcudG90YWxfYXZhaWxhYmxlID0gJ251bWJlcic7DQogICAgICAgIHJldHVybiBnb2xhbmdfdHlwZXNjcmlwdGlmeV9oZWxwZXJzXzEuVG9PYmplY3QodGhpcywgY2ZnKTsNCiAgICB9Ow0KICAgIHJldHVybiBHYW1lQ2hhbmdlczsNCn0oKSk7DQpleHBvcnRzLkdhbWVDaGFuZ2VzID0gR2FtZUNoYW5nZXM7DQovLyBzdHJ1Y3QydHM6Z2l0aHViLmNvbS9mcGF3ZWwvYmV0ZmFpcnMvZm9vdGJhbGwvZm9vdGJhbGwyLkdhbWVzQ2hhbmdlcw0KdmFyIEdhbWVzQ2hhbmdlcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICBmdW5jdGlvbiBHYW1lc0NoYW5nZXMoZGF0YSkgew0KICAgICAgICB2YXIgZCA9IChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JykgPyBnb2xhbmdfdHlwZXNjcmlwdGlmeV9oZWxwZXJzXzEuVG9PYmplY3QoZGF0YSkgOiB7fTsNCiAgICAgICAgdGhpcy5yZXNldCA9ICgncmVzZXQnIGluIGQpID8gZC5yZXNldCA6IGZhbHNlOw0KICAgICAgICB0aGlzLm5ldyA9IEFycmF5LmlzQXJyYXkoZC5uZXcpID8gZC5uZXcubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgR2FtZSh2KTsgfSkgOiBbXTsNCiAgICAgICAgdGhpcy5vdXQgPSAoJ291dCcgaW4gZCkgPyBkLm91dCA6IFtdOw0KICAgICAgICB0aGlzLnVwZCA9IEFycmF5LmlzQXJyYXkoZC51cGQpID8gZC51cGQubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgR2FtZUNoYW5nZXModik7IH0pIDogW107DQogICAgfQ0KICAgIEdhbWVzQ2hhbmdlcy5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBjZmcgPSB7fTsNCiAgICAgICAgcmV0dXJuIGdvbGFuZ190eXBlc2NyaXB0aWZ5X2hlbHBlcnNfMS5Ub09iamVjdCh0aGlzLCBjZmcpOw0KICAgIH07DQogICAgcmV0dXJuIEdhbWVzQ2hhbmdlczsNCn0oKSk7DQpleHBvcnRzLkdhbWVzQ2hhbmdlcyA9IEdhbWVzQ2hhbmdlczsNCmZ1bmN0aW9uIGFwcGx5X2dhbWVzX2NoYW5nZXMoZ2FtZXMsIGdhbWVzQ2hhbmdlcykgew0KICAgIGlmIChnYW1lc0NoYW5nZXMucmVzZXQpIHsNCiAgICAgICAgcmV0dXJuIGdhbWVzQ2hhbmdlcy5uZXc7DQogICAgfQ0KICAgIHZhciB1ID0gZ2V0R2FtZXNDaGFuZ2VzKGdhbWVzQ2hhbmdlcyk7DQogICAgdmFyIG5leHRHYW1lcyA9IGdhbWVzQ2hhbmdlcy5uZXc7DQogICAgZ2FtZXMuZmlsdGVyKGZ1bmN0aW9uIChnYW1lKSB7DQogICAgICAgIHJldHVybiAhKHUub3V0LmhhcyhnYW1lLmlkKSB8fCB1Lm5ldy5oYXMoZ2FtZS5pZCkpOw0KICAgIH0pLm1hcChmdW5jdGlvbiAoZ2FtZSkgew0KICAgICAgICB2YXIgZ2FtZUNoYW5nZXMgPSB1LnVwZC5nZXQoZ2FtZS5pZCk7DQogICAgICAgIGlmIChnYW1lQ2hhbmdlcykgew0KICAgICAgICAgICAgZ2FtZS5hcHBseUdhbWVDaGFuZ2VzKGdhbWVDaGFuZ2VzKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZ2FtZTsNCiAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChnYW1lKSB7IHJldHVybiBuZXh0R2FtZXMucHVzaChnYW1lKTsgfSk7DQogICAgbmV4dEdhbWVzLnNvcnQoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgub3JkZXIgLSB5Lm9yZGVyOyB9KTsNCiAgICB2YXIgaWRfZ2FtZSA9IG5ldyBNYXAoKTsNCiAgICB2YXIgb3JkZXJfZ2FtZSA9IG5ldyBNYXAoKTsNCiAgICBmb3IgKHZhciBfaSA9IDAsIG5leHRHYW1lc18xID0gbmV4dEdhbWVzOyBfaSA8IG5leHRHYW1lc18xLmxlbmd0aDsgX2krKykgew0KICAgICAgICB2YXIgeCA9IG5leHRHYW1lc18xW19pXTsNCiAgICAgICAgdmFyIGZvcm1hdEdhbWUgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5vcmRlciArICIgIiArIHguaG9tZSArICIgIiArIHguYXdheTsgfTsNCiAgICAgICAgdmFyIHkgPSBpZF9nYW1lLmdldCh4LmlkKTsNCiAgICAgICAgaWYgKHkpIHsNCiAgICAgICAgICAgIHJldHVybiAiYXNzZXJ0IHVuaXF1ZSBnYW1lIGlkOiAiICsgZm9ybWF0R2FtZSh4KSArICIgYW5kICIgKyBmb3JtYXRHYW1lKHkpOw0KICAgICAgICB9DQogICAgICAgIGlkX2dhbWUuc2V0KHguaWQsIHgpOw0KICAgICAgICB2YXIgeiA9IG9yZGVyX2dhbWUuZ2V0KHgub3JkZXIpOw0KICAgICAgICBpZiAoeikgew0KICAgICAgICAgICAgcmV0dXJuICJhc3NlcnQgdW5pcXVlIGdhbWUgb3JkZXI6ICIgKyBmb3JtYXRHYW1lKHgpICsgIiBhbmQgIiArIGZvcm1hdEdhbWUoeik7DQogICAgICAgIH0NCiAgICAgICAgb3JkZXJfZ2FtZS5zZXQoeC5vcmRlciwgeCk7DQogICAgfQ0KICAgIHJldHVybiBuZXh0R2FtZXM7DQp9DQpleHBvcnRzLmFwcGx5X2dhbWVzX2NoYW5nZXMgPSBhcHBseV9nYW1lc19jaGFuZ2VzOw0KZnVuY3Rpb24gZ2V0R2FtZXNDaGFuZ2VzKHgpIHsNCiAgICB2YXIgciA9IHsNCiAgICAgICAgb3V0OiBuZXcgU2V0KCksDQogICAgICAgIG5ldzogbmV3IE1hcCgpLA0KICAgICAgICB1cGQ6IG5ldyBNYXAoKSwNCiAgICB9Ow0KICAgIGlmICh4Lm91dCkgew0KICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0geC5vdXQ7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7DQogICAgICAgICAgICB2YXIgdmFsdWUgPSBfYVtfaV07DQogICAgICAgICAgICByLm91dC5hZGQodmFsdWUpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmICh4Lm5ldykgew0KICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0geC5uZXc7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7DQogICAgICAgICAgICB2YXIgdmFsdWUgPSBfY1tfYl07DQogICAgICAgICAgICByLm5ldy5zZXQodmFsdWUuaWQsIHZhbHVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoeC51cGQpIHsNCiAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IHgudXBkOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gX2VbX2RdOw0KICAgICAgICAgICAgci51cGQuc2V0KHZhbHVlLmlkLCB2YWx1ZSk7DQogICAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIHI7DQp9DQoKCi8qKiovIH0pLAoKLyoqKi8gIi4vc3JjL2luZGV4LnRzeCI6Ci8qISoqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL3NyYy9pbmRleC50c3ggKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKi8KLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKDQp2YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHsNCiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kOw0KICAgIHZhciByZXN1bHQgPSB7fTsNCiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdOw0KICAgIHJlc3VsdFsiZGVmYXVsdCJdID0gbW9kOw0KICAgIHJldHVybiByZXN1bHQ7DQp9Ow0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsNCnZhciBSZWFjdCA9IF9faW1wb3J0U3RhcihfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISByZWFjdCAqLyAicmVhY3QiKSk7DQp2YXIgUmVhY3RET00gPSBfX2ltcG9ydFN0YXIoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgcmVhY3QtZG9tICovICJyZWFjdC1kb20iKSk7DQp2YXIgRm9vdGJhbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9Gb290YmFsbC9Gb290YmFsbCAqLyAiLi9zcmMvY29tcG9uZW50cy9Gb290YmFsbC9Gb290YmFsbC50c3giKTsNClJlYWN0RE9NLnJlbmRlcihSZWFjdC5jcmVhdGVFbGVtZW50KEZvb3RiYWxsXzEuRm9vdGJhbGwsIG51bGwpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBwIikpOw0KCgovKioqLyB9KSwKCi8qKiovICIuL3NyYy91dGlscy9nb2xhbmdfdHlwZXNjcmlwdGlmeV9oZWxwZXJzLnRzIjoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL3NyYy91dGlscy9nb2xhbmdfdHlwZXNjcmlwdGlmeV9oZWxwZXJzLnRzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7DQovLyBoZWxwZXJzDQp2YXIgbWF4VW5peFRTSW5TZWNvbmRzID0gOTk5OTk5OTk5OTsNCmV4cG9ydHMubWF4VW5peFRTSW5TZWNvbmRzID0gbWF4VW5peFRTSW5TZWNvbmRzOw0KZnVuY3Rpb24gUGFyc2VEYXRlKGQpIHsNCiAgICBpZiAoZCBpbnN0YW5jZW9mIERhdGUpDQogICAgICAgIHJldHVybiBkOw0KICAgIGlmICh0eXBlb2YgZCA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgaWYgKGQgPiBtYXhVbml4VFNJblNlY29uZHMpDQogICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZCk7DQogICAgICAgIHJldHVybiBuZXcgRGF0ZShkICogMTAwMCk7IC8vIGdvIHRzDQogICAgfQ0KICAgIHJldHVybiBuZXcgRGF0ZShkKTsNCn0NCmV4cG9ydHMuUGFyc2VEYXRlID0gUGFyc2VEYXRlOw0KZnVuY3Rpb24gUGFyc2VOdW1iZXIodiwgaXNJbnQpIHsNCiAgICBpZiAoaXNJbnQgPT09IHZvaWQgMCkgeyBpc0ludCA9IGZhbHNlOyB9DQogICAgaWYgKCF2KQ0KICAgICAgICByZXR1cm4gMDsNCiAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKQ0KICAgICAgICByZXR1cm4gdjsNCiAgICByZXR1cm4gKGlzSW50ID8gcGFyc2VJbnQodikgOiBwYXJzZUZsb2F0KHYpKSB8fCAwOw0KfQ0KZXhwb3J0cy5QYXJzZU51bWJlciA9IFBhcnNlTnVtYmVyOw0KZnVuY3Rpb24gRnJvbUFycmF5KEN0b3IsIGRhdGEsIGRlZikgew0KICAgIGlmIChkZWYgPT09IHZvaWQgMCkgeyBkZWYgPSBudWxsOyB9DQogICAgaWYgKCFkYXRhIHx8ICFPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGgpDQogICAgICAgIHJldHVybiBkZWY7DQogICAgdmFyIGQgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTsNCiAgICByZXR1cm4gZC5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBDdG9yKHYpOyB9KTsNCn0NCmV4cG9ydHMuRnJvbUFycmF5ID0gRnJvbUFycmF5Ow0KZnVuY3Rpb24gVG9PYmplY3QobywgdHlwZU9yQ2ZnLCBjaGlsZCkgew0KICAgIGlmICh0eXBlT3JDZmcgPT09IHZvaWQgMCkgeyB0eXBlT3JDZmcgPSB7fTsgfQ0KICAgIGlmIChjaGlsZCA9PT0gdm9pZCAwKSB7IGNoaWxkID0gZmFsc2U7IH0NCiAgICBpZiAoIW8pDQogICAgICAgIHJldHVybiBudWxsOw0KICAgIGlmICh0eXBlb2Ygby50b09iamVjdCA9PT0gJ2Z1bmN0aW9uJyAmJiBjaGlsZCkNCiAgICAgICAgcmV0dXJuIG8udG9PYmplY3QoKTsNCiAgICBzd2l0Y2ggKHR5cGVvZiBvKSB7DQogICAgICAgIGNhc2UgJ3N0cmluZyc6DQogICAgICAgICAgICByZXR1cm4gdHlwZU9yQ2ZnID09PSAnbnVtYmVyJyA/IFBhcnNlTnVtYmVyKG8pIDogbzsNCiAgICAgICAgY2FzZSAnYm9vbGVhbic6DQogICAgICAgIGNhc2UgJ251bWJlcic6DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICB9DQogICAgaWYgKG8gaW5zdGFuY2VvZiBEYXRlKSB7DQogICAgICAgIHJldHVybiB0eXBlT3JDZmcgPT09ICdzdHJpbmcnID8gby50b0lTT1N0cmluZygpIDogTWF0aC5mbG9vcihvLmdldFRpbWUoKSAvIDEwMDApOw0KICAgIH0NCiAgICBpZiAoQXJyYXkuaXNBcnJheShvKSkNCiAgICAgICAgcmV0dXJuIG8ubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBUb09iamVjdCh2LCB0eXBlT3JDZmcsIHRydWUpOyB9KTsNCiAgICB2YXIgZCA9IHt9Ow0KICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhvKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHsNCiAgICAgICAgdmFyIGsgPSBfYVtfaV07DQogICAgICAgIHZhciB2ID0gb1trXTsNCiAgICAgICAgaWYgKCF2KQ0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIGRba10gPSBUb09iamVjdCh2LCB0eXBlT3JDZmdba10gfHwge30sIHRydWUpOw0KICAgIH0NCiAgICByZXR1cm4gZDsNCn0NCmV4cG9ydHMuVG9PYmplY3QgPSBUb09iamVjdDsNCi8vaW1wb3J0IHttYXhVbml4VFNJblNlY29uZHMsIFBhcnNlRGF0ZSwgUGFyc2VOdW1iZXIsIEZyb21BcnJheSwgVG9PYmplY3R9IGZyb20gIi4vZ29sYW5nX3R5cGVzY3JpcHRpZnlfaGVscGVycyI7DQoKCi8qKiovIH0pLAoKLyoqKi8gIi4vc3JjL3V0aWxzL3V0aWxzLnRzIjoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvdXRpbHMvdXRpbHMudHMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7DQpmdW5jdGlvbiB3ZWJTb2NrZXRVUkwodXJpKSB7DQogICAgdmFyIHByb3RvID0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgiaHR0cCIsICJ3cyIpOw0KICAgIHJldHVybiBwcm90byArICIvLyIgKyBkb2N1bWVudC5sb2NhdGlvbi5ob3N0ICsgdXJpOw0KfQ0KZXhwb3J0cy53ZWJTb2NrZXRVUkwgPSB3ZWJTb2NrZXRVUkw7DQoKCi8qKiovIH0pLAoKLyoqKi8gMDoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIG11bHRpIC4vc3JjL2luZGV4LnRzeCAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9pbmRleC50c3ggKi8iLi9zcmMvaW5kZXgudHN4Iik7CgoKLyoqKi8gfSksCgovKioqLyAicmVhY3QiOgovKiEqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIGV4dGVybmFsICJSZWFjdCIgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKiovCi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IFJlYWN0OwoKLyoqKi8gfSksCgovKioqLyAicmVhY3QtZG9tIjoKLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiBleHRlcm5hbCAiUmVhY3RET00iICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTTsKCi8qKiovIH0pCgovKioqKioqLyB9KTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFpbi5qcy5tYXA=\"")
		packr.PackJSONBytes("./../../../../../../Frontend/betfairf/dist", "scripts/main.js.map", "\"eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvZm9vdGJhbGwuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVjb25uZWN0aW5nd2Vic29ja2V0L3JlY29ubmVjdGluZy13ZWJzb2NrZXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvRm9vdGJhbGwvRm9vdGJhbGwudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0Zvb3RiYWxsL2Zvb3RiYWxsLmNzcz8wNWNlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0Zvb3RiYWxsL2dhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvZ29sYW5nX3R5cGVzY3JpcHRpZnlfaGVscGVycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdERPTVwiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtEQUEwQyxnQ0FBZ0M7QUFDMUU7QUFDQTs7QUFF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QTtBQUNBO0FBQ0EsY0FBYzs7QUFFZCxrREFBa0Qsc0JBQXNCO0FBQ3hFO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7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SUFFRCxPQUFPLENBQUMsQ0FBQztBQUNWLENBQUM7QUFTQSw0QkFBUTtBQUdULGlIQUFpSDs7Ozs7Ozs7Ozs7Ozs7O0FDaEVqSCxzQkFBOEIsR0FBWTtJQUN0QyxJQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQy9ELE9BQVUsS0FBSyxVQUFLLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLEdBQUssQ0FBQztBQUN2RCxDQUFDO0FBSEQsb0NBR0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0hELHVCOzs7Ozs7Ozs7OztBQ0FBLDBCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcInRhYmxlLmZvb3RiYWxsLXRhYmxlIHtcXHJcXG4gICAgYm9yZGVyLXNwYWNpbmc6IDA7XFxyXFxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbn1cXHJcXG50YWJsZS5mb290YmFsbC10YWJsZSB0aCB7XFxyXFxuICAgIHBvc2l0aW9uOiBzdGlja3k7XFxyXFxuICAgIHRvcDogMXB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGO1xcclxcbiAgICBoZWlnaHQ6IDQwcHg7XFxyXFxufVxcclxcbnRhYmxlLmZvb3RiYWxsLXRhYmxlIHRyOm50aC1jaGlsZChldmVuKSB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlNGU0ZTQ7XFxyXFxufVxcclxcbnRhYmxlLmZvb3RiYWxsLXRhYmxlIHRoLCB0YWJsZS5mb290YmFsbC10YWJsZSB0ZCB7XFxyXFxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjYmFiYWJhO1xcclxcblxcclxcbiAgICBib3JkZXItcmlnaHQ6IHNvbGlkIDFweCAjYmFiYWJhO1xcclxcbiAgICBib3JkZXItbGVmdDogc29saWQgMXB4ICNiYWJhYmE7XFxyXFxufVxcclxcblxcclxcbnRhYmxlLmZvb3RiYWxsLXRhYmxlIHRkIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcXHJcXG4gICAgcGFkZGluZzogMnB4IDRweDtcXHJcXG59XFxyXFxuXFxyXFxudGFibGUuZm9vdGJhbGwtdGFibGUgdGg6aG92ZXIge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZ3JleTtcXHJcXG4gICAgY29sb3I6IHdoaXRlO1xcclxcbn1cXHJcXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCIvLyBNSVQgTGljZW5zZTpcbi8vXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMiwgSm9lIFdhbG5lc1xuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbi8qKlxuICogVGhpcyBiZWhhdmVzIGxpa2UgYSBXZWJTb2NrZXQgaW4gZXZlcnkgd2F5LCBleGNlcHQgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCxcbiAqIG9yIGl0IGdldHMgZGlzY29ubmVjdGVkLCBpdCB3aWxsIHJlcGVhdGVkbHkgcG9sbCB1bnRpbCBpdCBzdWNjZXNzZnVsbHkgY29ubmVjdHNcbiAqIGFnYWluLlxuICpcbiAqIEl0IGlzIEFQSSBjb21wYXRpYmxlLCBzbyB3aGVuIHlvdSBoYXZlOlxuICogICB3cyA9IG5ldyBXZWJTb2NrZXQoJ3dzOi8vLi4uLicpO1xuICogeW91IGNhbiByZXBsYWNlIHdpdGg6XG4gKiAgIHdzID0gbmV3IFJlY29ubmVjdGluZ1dlYlNvY2tldCgnd3M6Ly8uLi4uJyk7XG4gKlxuICogVGhlIGV2ZW50IHN0cmVhbSB3aWxsIHR5cGljYWxseSBsb29rIGxpa2U6XG4gKiAgb25jb25uZWN0aW5nXG4gKiAgb25vcGVuXG4gKiAgb25tZXNzYWdlXG4gKiAgb25tZXNzYWdlXG4gKiAgb25jbG9zZSAvLyBsb3N0IGNvbm5lY3Rpb25cbiAqICBvbmNvbm5lY3RpbmdcbiAqICBvbm9wZW4gIC8vIHNvbWV0aW1lIGxhdGVyLi4uXG4gKiAgb25tZXNzYWdlXG4gKiAgb25tZXNzYWdlXG4gKiAgZXRjLi4uXG4gKlxuICogSXQgaXMgQVBJIGNvbXBhdGlibGUgd2l0aCB0aGUgc3RhbmRhcmQgV2ViU29ja2V0IEFQSSwgYXBhcnQgZnJvbSB0aGUgZm9sbG93aW5nIG1lbWJlcnM6XG4gKlxuICogLSBgYnVmZmVyZWRBbW91bnRgXG4gKiAtIGBleHRlbnNpb25zYFxuICogLSBgYmluYXJ5VHlwZWBcbiAqXG4gKiBMYXRlc3QgdmVyc2lvbjogaHR0cHM6Ly9naXRodWIuY29tL2pvZXdhbG5lcy9yZWNvbm5lY3Rpbmctd2Vic29ja2V0L1xuICogLSBKb2UgV2FsbmVzXG4gKlxuICogU3ludGF4XG4gKiA9PT09PT1cbiAqIHZhciBzb2NrZXQgPSBuZXcgUmVjb25uZWN0aW5nV2ViU29ja2V0KHVybCwgcHJvdG9jb2xzLCBvcHRpb25zKTtcbiAqXG4gKiBQYXJhbWV0ZXJzXG4gKiA9PT09PT09PT09XG4gKiB1cmwgLSBUaGUgdXJsIHlvdSBhcmUgY29ubmVjdGluZyB0by5cbiAqIHByb3RvY29scyAtIE9wdGlvbmFsIHN0cmluZyBvciBhcnJheSBvZiBwcm90b2NvbHMuXG4gKiBvcHRpb25zIC0gU2VlIGJlbG93XG4gKlxuICogT3B0aW9uc1xuICogPT09PT09PVxuICogT3B0aW9ucyBjYW4gZWl0aGVyIGJlIHBhc3NlZCB1cG9uIGluc3RhbnRpYXRpb24gb3Igc2V0IGFmdGVyIGluc3RhbnRpYXRpb246XG4gKlxuICogdmFyIHNvY2tldCA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQodXJsLCBudWxsLCB7IGRlYnVnOiB0cnVlLCByZWNvbm5lY3RJbnRlcnZhbDogNDAwMCB9KTtcbiAqXG4gKiBvclxuICpcbiAqIHZhciBzb2NrZXQgPSBuZXcgUmVjb25uZWN0aW5nV2ViU29ja2V0KHVybCk7XG4gKiBzb2NrZXQuZGVidWcgPSB0cnVlO1xuICogc29ja2V0LnJlY29ubmVjdEludGVydmFsID0gNDAwMDtcbiAqXG4gKiBkZWJ1Z1xuICogLSBXaGV0aGVyIHRoaXMgaW5zdGFuY2Ugc2hvdWxkIGxvZyBkZWJ1ZyBtZXNzYWdlcy4gQWNjZXB0cyB0cnVlIG9yIGZhbHNlLiBEZWZhdWx0OiBmYWxzZS5cbiAqXG4gKiBhdXRvbWF0aWNPcGVuXG4gKiAtIFdoZXRoZXIgb3Igbm90IHRoZSB3ZWJzb2NrZXQgc2hvdWxkIGF0dGVtcHQgdG8gY29ubmVjdCBpbW1lZGlhdGVseSB1cG9uIGluc3RhbnRpYXRpb24uIFRoZSBzb2NrZXQgY2FuIGJlIG1hbnVhbGx5IG9wZW5lZCBvciBjbG9zZWQgYXQgYW55IHRpbWUgdXNpbmcgd3Mub3BlbigpIGFuZCB3cy5jbG9zZSgpLlxuICpcbiAqIHJlY29ubmVjdEludGVydmFsXG4gKiAtIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGJlZm9yZSBhdHRlbXB0aW5nIHRvIHJlY29ubmVjdC4gQWNjZXB0cyBpbnRlZ2VyLiBEZWZhdWx0OiAxMDAwLlxuICpcbiAqIG1heFJlY29ubmVjdEludGVydmFsXG4gKiAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgYSByZWNvbm5lY3Rpb24gYXR0ZW1wdC4gQWNjZXB0cyBpbnRlZ2VyLiBEZWZhdWx0OiAzMDAwMC5cbiAqXG4gKiByZWNvbm5lY3REZWNheVxuICogLSBUaGUgcmF0ZSBvZiBpbmNyZWFzZSBvZiB0aGUgcmVjb25uZWN0IGRlbGF5LiBBbGxvd3MgcmVjb25uZWN0IGF0dGVtcHRzIHRvIGJhY2sgb2ZmIHdoZW4gcHJvYmxlbXMgcGVyc2lzdC4gQWNjZXB0cyBpbnRlZ2VyIG9yIGZsb2F0LiBEZWZhdWx0OiAxLjUuXG4gKlxuICogdGltZW91dEludGVydmFsXG4gKiAtIFRoZSBtYXhpbXVtIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgZm9yIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkIGJlZm9yZSBjbG9zaW5nIGFuZCByZXRyeWluZy4gQWNjZXB0cyBpbnRlZ2VyLiBEZWZhdWx0OiAyMDAwLlxuICpcbiAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cyl7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGdsb2JhbC5SZWNvbm5lY3RpbmdXZWJTb2NrZXQgPSBmYWN0b3J5KCk7XG4gICAgfVxufSkodGhpcywgZnVuY3Rpb24gKCkge1xuXG4gICAgaWYgKCEoJ1dlYlNvY2tldCcgaW4gd2luZG93KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUmVjb25uZWN0aW5nV2ViU29ja2V0KHVybCwgcHJvdG9jb2xzLCBvcHRpb25zKSB7XG5cbiAgICAgICAgLy8gRGVmYXVsdCBzZXR0aW5nc1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XG5cbiAgICAgICAgICAgIC8qKiBXaGV0aGVyIHRoaXMgaW5zdGFuY2Ugc2hvdWxkIGxvZyBkZWJ1ZyBtZXNzYWdlcy4gKi9cbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcblxuICAgICAgICAgICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoZSB3ZWJzb2NrZXQgc2hvdWxkIGF0dGVtcHQgdG8gY29ubmVjdCBpbW1lZGlhdGVseSB1cG9uIGluc3RhbnRpYXRpb24uICovXG4gICAgICAgICAgICBhdXRvbWF0aWNPcGVuOiB0cnVlLFxuXG4gICAgICAgICAgICAvKiogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcmVjb25uZWN0LiAqL1xuICAgICAgICAgICAgcmVjb25uZWN0SW50ZXJ2YWw6IDEwMDAsXG4gICAgICAgICAgICAvKiogVGhlIG1heGltdW0gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBhIHJlY29ubmVjdGlvbiBhdHRlbXB0LiAqL1xuICAgICAgICAgICAgbWF4UmVjb25uZWN0SW50ZXJ2YWw6IDMwMDAwLFxuICAgICAgICAgICAgLyoqIFRoZSByYXRlIG9mIGluY3JlYXNlIG9mIHRoZSByZWNvbm5lY3QgZGVsYXkuIEFsbG93cyByZWNvbm5lY3QgYXR0ZW1wdHMgdG8gYmFjayBvZmYgd2hlbiBwcm9ibGVtcyBwZXJzaXN0LiAqL1xuICAgICAgICAgICAgcmVjb25uZWN0RGVjYXk6IDEuNSxcblxuICAgICAgICAgICAgLyoqIFRoZSBtYXhpbXVtIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgZm9yIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkIGJlZm9yZSBjbG9zaW5nIGFuZCByZXRyeWluZy4gKi9cbiAgICAgICAgICAgIHRpbWVvdXRJbnRlcnZhbDogMjAwMCxcblxuICAgICAgICAgICAgLyoqIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZWNvbm5lY3Rpb24gYXR0ZW1wdHMgdG8gbWFrZS4gVW5saW1pdGVkIGlmIG51bGwuICovXG4gICAgICAgICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0czogbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9ucykgeyBvcHRpb25zID0ge307IH1cblxuICAgICAgICAvLyBPdmVyd3JpdGUgYW5kIGRlZmluZSBzZXR0aW5ncyB3aXRoIG9wdGlvbnMgaWYgdGhleSBleGlzdC5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNldHRpbmdzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IHNldHRpbmdzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGVzZSBzaG91bGQgYmUgdHJlYXRlZCBhcyByZWFkLW9ubHkgcHJvcGVydGllc1xuXG4gICAgICAgIC8qKiBUaGUgVVJMIGFzIHJlc29sdmVkIGJ5IHRoZSBjb25zdHJ1Y3Rvci4gVGhpcyBpcyBhbHdheXMgYW4gYWJzb2x1dGUgVVJMLiBSZWFkIG9ubHkuICovXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuXG4gICAgICAgIC8qKiBUaGUgbnVtYmVyIG9mIGF0dGVtcHRlZCByZWNvbm5lY3RzIHNpbmNlIHN0YXJ0aW5nLCBvciB0aGUgbGFzdCBzdWNjZXNzZnVsIGNvbm5lY3Rpb24uIFJlYWQgb25seS4gKi9cbiAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBjb25uZWN0aW9uLlxuICAgICAgICAgKiBDYW4gYmUgb25lIG9mOiBXZWJTb2NrZXQuQ09OTkVDVElORywgV2ViU29ja2V0Lk9QRU4sIFdlYlNvY2tldC5DTE9TSU5HLCBXZWJTb2NrZXQuQ0xPU0VEXG4gICAgICAgICAqIFJlYWQgb25seS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHN0cmluZyBpbmRpY2F0aW5nIHRoZSBuYW1lIG9mIHRoZSBzdWItcHJvdG9jb2wgdGhlIHNlcnZlciBzZWxlY3RlZDsgdGhpcyB3aWxsIGJlIG9uZSBvZlxuICAgICAgICAgKiB0aGUgc3RyaW5ncyBzcGVjaWZpZWQgaW4gdGhlIHByb3RvY29scyBwYXJhbWV0ZXIgd2hlbiBjcmVhdGluZyB0aGUgV2ViU29ja2V0IG9iamVjdC5cbiAgICAgICAgICogUmVhZCBvbmx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG5cbiAgICAgICAgLy8gUHJpdmF0ZSBzdGF0ZSB2YXJpYWJsZXNcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciB3cztcbiAgICAgICAgdmFyIGZvcmNlZENsb3NlID0gZmFsc2U7XG4gICAgICAgIHZhciB0aW1lZE91dCA9IGZhbHNlO1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAvLyBXaXJlIHVwIFwib24qXCIgcHJvcGVydGllcyBhcyBldmVudCBoYW5kbGVyc1xuXG4gICAgICAgIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAgICAgICBmdW5jdGlvbihldmVudCkgeyBzZWxmLm9ub3BlbihldmVudCk7IH0pO1xuICAgICAgICBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICAgICAgZnVuY3Rpb24oZXZlbnQpIHsgc2VsZi5vbmNsb3NlKGV2ZW50KTsgfSk7XG4gICAgICAgIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3RpbmcnLCBmdW5jdGlvbihldmVudCkgeyBzZWxmLm9uY29ubmVjdGluZyhldmVudCk7IH0pO1xuICAgICAgICBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgICAgZnVuY3Rpb24oZXZlbnQpIHsgc2VsZi5vbm1lc3NhZ2UoZXZlbnQpOyB9KTtcbiAgICAgICAgZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7IHNlbGYub25lcnJvcihldmVudCk7IH0pO1xuXG4gICAgICAgIC8vIEV4cG9zZSB0aGUgQVBJIHJlcXVpcmVkIGJ5IEV2ZW50VGFyZ2V0XG5cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyID0gZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyID0gZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50ID0gZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudC5iaW5kKGV2ZW50VGFyZ2V0KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBnZW5lcmF0ZXMgYW4gZXZlbnQgdGhhdCBpcyBjb21wYXRpYmxlIHdpdGggc3RhbmRhcmRcbiAgICAgICAgICogY29tcGxpYW50IGJyb3dzZXJzIGFuZCBJRTkgLSBJRTExXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgd2lsbCBwcmV2ZW50IHRoZSBlcnJvcjpcbiAgICAgICAgICogT2JqZWN0IGRvZXNuJ3Qgc3VwcG9ydCB0aGlzIGFjdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5MzQ1MzkyL3doeS1hcmVudC1teS1wYXJhbWV0ZXJzLWdldHRpbmctcGFzc2VkLXRocm91Z2gtdG8tYS1kaXNwYXRjaGVkLWV2ZW50LzE5MzQ1NTYzIzE5MzQ1NTYzXG4gICAgICAgICAqIEBwYXJhbSBzIFN0cmluZyBUaGUgbmFtZSB0aGF0IHRoZSBldmVudCBzaG91bGQgdXNlXG4gICAgICAgICAqIEBwYXJhbSBhcmdzIE9iamVjdCBhbiBvcHRpb25hbCBvYmplY3QgdGhhdCB0aGUgZXZlbnQgd2lsbCB1c2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnQocywgYXJncykge1xuICAgICAgICBcdHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgICBcdGV2dC5pbml0Q3VzdG9tRXZlbnQocywgZmFsc2UsIGZhbHNlLCBhcmdzKTtcbiAgICAgICAgXHRyZXR1cm4gZXZ0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMub3BlbiA9IGZ1bmN0aW9uIChyZWNvbm5lY3RBdHRlbXB0KSB7XG4gICAgICAgICAgICB3cyA9IG5ldyBXZWJTb2NrZXQoc2VsZi51cmwsIHByb3RvY29scyB8fCBbXSk7XG5cbiAgICAgICAgICAgIGlmIChyZWNvbm5lY3RBdHRlbXB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4UmVjb25uZWN0QXR0ZW1wdHMgJiYgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA+IHRoaXMubWF4UmVjb25uZWN0QXR0ZW1wdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChnZW5lcmF0ZUV2ZW50KCdjb25uZWN0aW5nJykpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5kZWJ1ZyB8fCBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuZGVidWdBbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdSZWNvbm5lY3RpbmdXZWJTb2NrZXQnLCAnYXR0ZW1wdC1jb25uZWN0Jywgc2VsZi51cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbG9jYWxXcyA9IHdzO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdSZWNvbm5lY3RpbmdXZWJTb2NrZXQnLCAnY29ubmVjdGlvbi10aW1lb3V0Jywgc2VsZi51cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aW1lZE91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbG9jYWxXcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRpbWVkT3V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9LCBzZWxmLnRpbWVvdXRJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHdzLm9ub3BlbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdSZWNvbm5lY3RpbmdXZWJTb2NrZXQnLCAnb25vcGVuJywgc2VsZi51cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLnByb3RvY29sID0gd3MucHJvdG9jb2w7XG4gICAgICAgICAgICAgICAgc2VsZi5yZWFkeVN0YXRlID0gV2ViU29ja2V0Lk9QRU47XG4gICAgICAgICAgICAgICAgc2VsZi5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBnZW5lcmF0ZUV2ZW50KCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgZS5pc1JlY29ubmVjdCA9IHJlY29ubmVjdEF0dGVtcHQ7XG4gICAgICAgICAgICAgICAgcmVjb25uZWN0QXR0ZW1wdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB3cy5vbmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgd3MgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZWRDbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0VEO1xuICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGdlbmVyYXRlRXZlbnQoJ2Nsb3NlJykpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGdlbmVyYXRlRXZlbnQoJ2Nvbm5lY3RpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgZS5jb2RlID0gZXZlbnQuY29kZTtcbiAgICAgICAgICAgICAgICAgICAgZS5yZWFzb24gPSBldmVudC5yZWFzb247XG4gICAgICAgICAgICAgICAgICAgIGUud2FzQ2xlYW4gPSBldmVudC53YXNDbGVhbjtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWNvbm5lY3RBdHRlbXB0ICYmICF0aW1lZE91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZGVidWcgfHwgUmVjb25uZWN0aW5nV2ViU29ja2V0LmRlYnVnQWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUmVjb25uZWN0aW5nV2ViU29ja2V0JywgJ29uY2xvc2UnLCBzZWxmLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGdlbmVyYXRlRXZlbnQoJ2Nsb3NlJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBzZWxmLnJlY29ubmVjdEludGVydmFsICogTWF0aC5wb3coc2VsZi5yZWNvbm5lY3REZWNheSwgc2VsZi5yZWNvbm5lY3RBdHRlbXB0cyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9wZW4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQgPiBzZWxmLm1heFJlY29ubmVjdEludGVydmFsID8gc2VsZi5tYXhSZWNvbm5lY3RJbnRlcnZhbCA6IHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdSZWNvbm5lY3RpbmdXZWJTb2NrZXQnLCAnb25tZXNzYWdlJywgc2VsZi51cmwsIGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZSA9IGdlbmVyYXRlRXZlbnQoJ21lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICBlLmRhdGEgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd3Mub25lcnJvciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuZGVidWcgfHwgUmVjb25uZWN0aW5nV2ViU29ja2V0LmRlYnVnQWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1JlY29ubmVjdGluZ1dlYlNvY2tldCcsICdvbmVycm9yJywgc2VsZi51cmwsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChnZW5lcmF0ZUV2ZW50KCdlcnJvcicpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGV0aGVyIG9yIG5vdCB0byBjcmVhdGUgYSB3ZWJzb2NrZXQgdXBvbiBpbnN0YW50aWF0aW9uXG4gICAgICAgIGlmICh0aGlzLmF1dG9tYXRpY09wZW4gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5vcGVuKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFuc21pdHMgZGF0YSB0byB0aGUgc2VydmVyIG92ZXIgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZGF0YSBhIHRleHQgc3RyaW5nLCBBcnJheUJ1ZmZlciBvciBCbG9iIHRvIHNlbmQgdG8gdGhlIHNlcnZlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmICh3cykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRlYnVnIHx8IFJlY29ubmVjdGluZ1dlYlNvY2tldC5kZWJ1Z0FsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdSZWNvbm5lY3RpbmdXZWJTb2NrZXQnLCAnc2VuZCcsIHNlbGYudXJsLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdzLnNlbmQoZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93ICdJTlZBTElEX1NUQVRFX0VSUiA6IFBhdXNpbmcgdG8gcmVjb25uZWN0IHdlYnNvY2tldCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsb3NlcyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gb3IgY29ubmVjdGlvbiBhdHRlbXB0LCBpZiBhbnkuXG4gICAgICAgICAqIElmIHRoZSBjb25uZWN0aW9uIGlzIGFscmVhZHkgQ0xPU0VELCB0aGlzIG1ldGhvZCBkb2VzIG5vdGhpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IENMT1NFX05PUk1BTCBjb2RlXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvZGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb2RlID0gMTAwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcmNlZENsb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh3cykge1xuICAgICAgICAgICAgICAgIHdzLmNsb3NlKGNvZGUsIHJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZGl0aW9uYWwgcHVibGljIEFQSSBtZXRob2QgdG8gcmVmcmVzaCB0aGUgY29ubmVjdGlvbiBpZiBzdGlsbCBvcGVuIChjbG9zZSwgcmUtb3BlbikuXG4gICAgICAgICAqIEZvciBleGFtcGxlLCBpZiB0aGUgYXBwIHN1c3BlY3RzIGJhZCBkYXRhIC8gbWlzc2VkIGhlYXJ0IGJlYXRzLCBpdCBjYW4gdHJ5IHRvIHJlZnJlc2guXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh3cykge1xuICAgICAgICAgICAgICAgIHdzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uJ3MgcmVhZHlTdGF0ZSBjaGFuZ2VzIHRvIE9QRU47XG4gICAgICogdGhpcyBpbmRpY2F0ZXMgdGhhdCB0aGUgY29ubmVjdGlvbiBpcyByZWFkeSB0byBzZW5kIGFuZCByZWNlaXZlIGRhdGEuXG4gICAgICovXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5vbm9wZW4gPSBmdW5jdGlvbihldmVudCkge307XG4gICAgLyoqIEFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbidzIHJlYWR5U3RhdGUgY2hhbmdlcyB0byBDTE9TRUQuICovXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LnByb3RvdHlwZS5vbmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHt9O1xuICAgIC8qKiBBbiBldmVudCBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiBhIGNvbm5lY3Rpb24gYmVnaW5zIGJlaW5nIGF0dGVtcHRlZC4gKi9cbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLm9uY29ubmVjdGluZyA9IGZ1bmN0aW9uKGV2ZW50KSB7fTtcbiAgICAvKiogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gYSBtZXNzYWdlIGlzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci4gKi9cbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQucHJvdG90eXBlLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7fTtcbiAgICAvKiogQW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgY2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLiAqL1xuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uKGV2ZW50KSB7fTtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgYWxsIGluc3RhbmNlcyBvZiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQgc2hvdWxkIGxvZyBkZWJ1ZyBtZXNzYWdlcy5cbiAgICAgKiBTZXR0aW5nIHRoaXMgdG8gdHJ1ZSBpcyB0aGUgZXF1aXZhbGVudCBvZiBzZXR0aW5nIGFsbCBpbnN0YW5jZXMgb2YgUmVjb25uZWN0aW5nV2ViU29ja2V0LmRlYnVnIHRvIHRydWUuXG4gICAgICovXG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LmRlYnVnQWxsID0gZmFsc2U7XG5cbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuQ09OTkVDVElORyA9IFdlYlNvY2tldC5DT05ORUNUSU5HO1xuICAgIFJlY29ubmVjdGluZ1dlYlNvY2tldC5PUEVOID0gV2ViU29ja2V0Lk9QRU47XG4gICAgUmVjb25uZWN0aW5nV2ViU29ja2V0LkNMT1NJTkcgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICBSZWNvbm5lY3RpbmdXZWJTb2NrZXQuQ0xPU0VEID0gV2ViU29ja2V0LkNMT1NFRDtcblxuICAgIHJldHVybiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQ7XG59KTtcbiIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHthcHBseV9nYW1lc19jaGFuZ2VzLCBHYW1lLCBHYW1lc0NoYW5nZXN9IGZyb20gXCIuL2dhbWVcIjtcclxuaW1wb3J0IFJlY29ubmVjdGluZ1dlYlNvY2tldCBmcm9tIFwicmVjb25uZWN0aW5nd2Vic29ja2V0XCI7XHJcbmltcG9ydCB7d2ViU29ja2V0VVJMfSBmcm9tIFwiLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuaW1wb3J0IFwiLi9mb290YmFsbC5jc3NcIjtcclxuXHJcbmVudW0gQ29sIHtcclxuICAgIG9yZGVyID0gJ29yZGVyJyxcclxuICAgIGhvbWUgPSAnaG9tZScsXHJcbiAgICBzY29yZSA9ICdzY29yZScsXHJcbiAgICBhd2F5ID0gJ2F3YXknLFxyXG4gICAgdGltZSA9ICd0aW1lJyxcclxuICAgIGNvbXBldGl0aW9uID0gJ2NvbXBldGl0aW9uJyxcclxuICAgIGNvdW50cnkgPSAnY291bnRyeScsXHJcbiAgICB0b3RhbF9tYXRjaGVkID0gJ3RvdGFsX21hdGNoZWQnLFxyXG4gICAgdG90YWxfYXZhaWxhYmxlID0gJ3RvdGFsX2F2YWlsYWJsZScsXHJcbiAgICB3aW5fYmFjayA9ICd3aW5fYmFjaycsXHJcbiAgICB3aW5fbGF5ID0gJ3dpbl9sYXknLFxyXG4gICAgZHJhd19iYWNrID0gJ2RyYXdfYmFjaycsXHJcbiAgICBkcmF3X2xheSA9ICdkcmF3X2xheScsXHJcbiAgICBsb3NlX2JhY2sgPSAnbG9zZV9iYWNrJyxcclxuICAgIGxvc2VfbGF5ID0gJ2xvc2VfbGF5JyxcclxufVxyXG5cclxuY29uc3QgY29scyA9IE9iamVjdC5rZXlzKENvbCkubWFwKCAoaykgPT4gayBhcyBhbnkgYXMgQ29sKTtcclxuXHJcblxyXG5cclxuY29uc3QgcmVuZGVyQ29lZmZpY2llbnQgPSAodjpudW1iZXIpIDogUmVhY3QuUmVhY3ROb2RlID0+IHYgPyBgJHt2fWAgOiAnJztcclxuY29uc3QgcmVuZGVyRG9sbGFyID0gKHY6bnVtYmVyKSA6IFJlYWN0LlJlYWN0Tm9kZSA9PiB2ID8gYCR7dn0kYCA6ICcnO1xyXG5jb25zdCBsZWZ0QWxpZ25JdGFsaWMgOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0ge1xyXG4gICAgdGV4dEFsaWduOlwicmlnaHRcIixcclxuICAgIGZvbnRTdHlsZTpcIml0YWxpY1wiLFxyXG59O1xyXG5cclxuY29uc3QgY29sX2luZm8gPSAoeDogQ29sKSA6IHtcclxuICAgIHRpdGxlOiBzdHJpbmcsXHJcbiAgICB2YWx1ZTogKHg6IEdhbWUpID0+IFJlYWN0LlJlYWN0Tm9kZSxcclxuICAgIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcyxcclxufSA9PiB7XHJcbiAgICBzd2l0Y2ggKHgpIHtcclxuICAgICAgICBjYXNlIENvbC5vcmRlcjpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn4oSWJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAoeCkgPT4gIHgub3JkZXIgKyAxICxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FzZSBDb2wuaG9tZTpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn0JTQvtC80LAnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6ICh4KSA9PiB4LmhvbWUsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogeyB0ZXh0QWxpZ246XCJjZW50ZXJcIiB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhc2UgQ29sLmF3YXk6XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ9CSINCz0L7RgdGC0Y/RhScsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogKHgpID0+ICB4LmF3YXksXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogeyB0ZXh0QWxpZ246XCJjZW50ZXJcIiB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhc2UgQ29sLnNjb3JlOlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfQodGH0ZHRgicsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogKHgpID0+ICAgeC5pbl9wbGF5ID8gIGAke3guc2NvcmVfaG9tZX0gLSAke3guc2NvcmVfYXdheX1gIDogJycgLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgdGV4dEFsaWduOlwiY2VudGVyXCIgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBjYXNlIENvbC50aW1lOlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfQktGA0LXQvNGPJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAoeCkgPT4gICB4LnRpbWUsXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogeyB0ZXh0QWxpZ246XCJjZW50ZXJcIiB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhc2UgQ29sLmNvbXBldGl0aW9uOlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfQp9C10LzQv9C40L7QvdCw0YInLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6ICh4KSA9PiAgeC5jb21wZXRpdGlvbixcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FzZSBDb2wuY291bnRyeTpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn0KHRgtGA0LDQvdCwJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAoeCkgPT4gIHguY291bnRyeSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FzZSBDb2wudG90YWxfbWF0Y2hlZDpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn0JIg0L/QsNGA0LUnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6ICh4KSA9PiAgcmVuZGVyRG9sbGFyKHgudG90YWxfbWF0Y2hlZCksXHJcbiAgICAgICAgICAgICAgICBzdHlsZTogbGVmdEFsaWduSXRhbGljLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBjYXNlIENvbC50b3RhbF9hdmFpbGFibGU6XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ9Cd0LUg0LIg0L/QsNGA0LUnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6ICh4KSA9PiAgcmVuZGVyRG9sbGFyKHgudG90YWxfYXZhaWxhYmxlKSxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBsZWZ0QWxpZ25JdGFsaWMsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhc2UgQ29sLndpbl9iYWNrOlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfQnzErJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAoeCkgPT4gIHJlbmRlckNvZWZmaWNpZW50KHgud2luX2JhY2spLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IGxlZnRBbGlnbkl0YWxpYyxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FzZSBDb2wud2luX2xheTpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn0J8xLScsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogKHgpID0+ICByZW5kZXJDb2VmZmljaWVudCh4Lndpbl9sYXkpLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IGxlZnRBbGlnbkl0YWxpYyxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FzZSBDb2wuZHJhd19iYWNrOlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfQnSsnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6ICh4KSA9PiAgcmVuZGVyQ29lZmZpY2llbnQoeC5kcmF3X2JhY2spLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IGxlZnRBbGlnbkl0YWxpYyxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FzZSBDb2wuZHJhd19sYXk6XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ9CdLScsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogKHgpID0+ICByZW5kZXJDb2VmZmljaWVudCh4LmRyYXdfbGF5KSxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBsZWZ0QWxpZ25JdGFsaWMsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhc2UgQ29sLmxvc2VfYmFjazpcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAn0J8yKycsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogKHgpID0+ICByZW5kZXJDb2VmZmljaWVudCh4Lmxvc2VfbGF5KSxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiBsZWZ0QWxpZ25JdGFsaWMsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGNhc2UgQ29sLmxvc2VfbGF5OlxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICfQnzItJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAoeCkgPT4gIHJlbmRlckNvZWZmaWNpZW50KHgubG9zZV9sYXkpLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IGxlZnRBbGlnbkl0YWxpYyxcclxuICAgICAgICAgICAgfTtcclxuICAgIH1cclxufTtcclxuXHJcbnR5cGUgc29ydF9kaXIgPSAnYXNjJyB8ICdkZXNjJztcclxuXHJcbmludGVyZmFjZSBzdGF0ZSB7XHJcbiAgICB3czogUmVjb25uZWN0aW5nV2ViU29ja2V0LFxyXG4gICAgZ2FtZXM6IEdhbWUgW11cclxuICAgIHNvcnRfY29sOiBDb2w7XHJcbiAgICBzb3J0X2Rpcjogc29ydF9kaXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGb290YmFsbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDx7fSwgc3RhdGU+IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczoge30pIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVySGVhZENlbGwgPSB0aGlzLnJlbmRlckhlYWRDZWxsLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBjb25zdCB3cyA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQod2ViU29ja2V0VVJMKCcvZm9vdGJhbGwnKSwgW10sIHtcclxuICAgICAgICAgICAgZGVidWc6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9tYXRpY09wZW46IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKCh4OiBzdGF0ZSk6IHN0YXRlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBhcHBseV9nYW1lc19jaGFuZ2VzKHguZ2FtZXMsIG5ldyBHYW1lc0NoYW5nZXMoSlNPTi5wYXJzZShldmVudC5kYXRhKSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Iodik7XHJcbiAgICAgICAgICAgICAgICAgICAgeC53cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLngsIGdhbWVzOiB2LCB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdzLm9wZW4oKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICB3czogd3MsXHJcbiAgICAgICAgICAgIGdhbWVzOiBbXSxcclxuICAgICAgICAgICAgc29ydF9jb2w6IENvbC5vcmRlcixcclxuICAgICAgICAgICAgc29ydF9kaXI6ICdhc2MnLFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIHJlbmRlckNlbGwgKGM6Q29sLCB4OkdhbWUpIHtcclxuICAgICAgICBsZXQgYSA9IGNvbF9pbmZvKGMpO1xyXG4gICAgICAgIHJldHVybiA8dGQga2V5PXtjfSBzdHlsZT17ey4uLmEuc3R5bGV9fSA+XHJcbiAgICAgICAgICAgIHthLnZhbHVlKHgpfVxyXG4gICAgICAgIDwvdGQ+O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckhlYWRDZWxsIChjOkNvbCkge1xyXG4gICAgICAgIGxldCBhID0gY29sX2luZm8oYyk7XHJcbiAgICAgICAgY29uc3QgW2NoLCBjb2xvcl0gPVxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNvcnRfY29sID09PSBjXHJcbiAgICAgICAgICAgICAgICA/IFsgdGhpcy5zdGF0ZS5zb3J0X2RpciA9PT0gJ2FzYycgPyAn4oaTJyA6ICfihpEnLCAncmdiKDg1LCA4NSwgODUpJ11cclxuICAgICAgICAgICAgICAgIDogWyfihpUnLCAncmdiKDIwNCwgMjA0LCAyMDQpJ107XHJcbiAgICAgICAgcmV0dXJuIDx0aFxyXG4gICAgICAgICAgICBrZXk9e2N9XHJcblxyXG4gICAgICAgICAgICBvbkNsaWNrPXsgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsuLi50aGlzLnN0YXRlLCBzb3J0X2NvbDogYywgc29ydF9kaXI6IHRoaXMuc3RhdGUuc29ydF9kaXIgPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyd9KTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgc3R5bGU9e3tjdXJzb3I6J3BvaW50ZXInfX0gPlxyXG4gICAgICAgICAgICB7YS50aXRsZX1cclxuICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgOiBjb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0Oidib2xkJyxcclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZToxNixcclxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnY2FsaWJyaSwgaGVsdmV0aWNhLCBhcmlhbCwgc2Fucy1zZXJpZidcclxuICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAge2NofVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPC90aD47XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHNvcnRGdW4gPSBjb2xfaW5mbyh0aGlzLnN0YXRlLnNvcnRfY29sKS52YWx1ZTtcclxuICAgICAgICBsZXQgZ2FtZXMgPSB0aGlzLnN0YXRlLmdhbWVzLnNsaWNlKCk7XHJcbiAgICAgICAgZ2FtZXMuc29ydCggKHgsIHkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYSA6YW55ID0gc29ydEZ1bih4KTtcclxuICAgICAgICAgICAgY29uc3QgYiA6YW55ID0gc29ydEZ1bih5KTtcclxuICAgICAgICAgICAgcmV0dXJuICgoYSA8IGIpID8gLTEgOiAoYSA+IGIpID8gMSA6IDApICogKHRoaXMuc3RhdGUuc29ydF9kaXIgPT09ICdhc2MnID8gMSA6IC0xKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gPHRhYmxlIGNsYXNzTmFtZT17J2Zvb3RiYWxsLXRhYmxlJ30+XHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAge2NvbHMubWFwKHRoaXMucmVuZGVySGVhZENlbGwpfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgIHtnYW1lcy5tYXAoKHgpID0+XHJcbiAgICAgICAgICAgICAgICA8dHIga2V5PXt4LmlkfT5cclxuICAgICAgICAgICAgICAgICAgICB7IGNvbHMubWFwKChjKSA9PiBGb290YmFsbC5yZW5kZXJDZWxsKGMseCkgKSB9XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9mb290YmFsbC5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vZm9vdGJhbGwuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9mb290YmFsbC5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCJpbXBvcnQge1BhcnNlRGF0ZSwgVG9PYmplY3R9IGZyb20gXCIuLi8uLi91dGlscy9nb2xhbmdfdHlwZXNjcmlwdGlmeV9oZWxwZXJzXCI7XG5cbi8vIHN0cnVjdDJ0czpnaXRodWIuY29tL2ZwYXdlbC9iZXRmYWlycy9mb290YmFsbC9mb290YmFsbDIuR2FtZVxuZXhwb3J0IGNsYXNzIEdhbWUge1xuICAgIGlkOiBudW1iZXI7XG4gICAgb3JkZXI6IG51bWJlcjtcbiAgICBob21lOiBzdHJpbmc7XG4gICAgYXdheTogc3RyaW5nO1xuICAgIHNjb3JlX2hvbWU6IG51bWJlcjtcbiAgICBzY29yZV9hd2F5OiBudW1iZXI7XG4gICAgaW5fcGxheTogYm9vbGVhbjtcbiAgICB0aW1lOiBzdHJpbmc7XG4gICAgY29tcGV0aXRpb246IHN0cmluZztcbiAgICBjb3VudHJ5OiBzdHJpbmc7XG4gICAgb3Blbl9kYXRlOiBEYXRlO1xuICAgIHdpbl9iYWNrOiBudW1iZXI7XG4gICAgd2luX2xheTogbnVtYmVyO1xuICAgIGxvc2VfYmFjazogbnVtYmVyO1xuICAgIGxvc2VfbGF5OiBudW1iZXI7XG4gICAgZHJhd19iYWNrOiBudW1iZXI7XG4gICAgZHJhd19sYXk6IG51bWJlcjtcbiAgICB0b3RhbF9tYXRjaGVkOiBudW1iZXI7XG4gICAgdG90YWxfYXZhaWxhYmxlOiBudW1iZXI7XG4gICAgZXJyb3I6IHN0cmluZztcblxuICAgIGdldCBTY29yZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5pbl9wbGF5ID8gYCR7dGhpcy5zY29yZV9ob21lfSAtICR7dGhpcy5zY29yZV9hd2F5fWAgOiAnJztcbiAgICB9XG5cbiAgICBnZXQgT3JkZXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JkZXIgKyAxO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKGRhdGE/OiBhbnkpIHtcblxuICAgICAgICBjb25zdCBkOiBhbnkgPSAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpID8gVG9PYmplY3QoZGF0YSkgOiB7fTtcbiAgICAgICAgdGhpcy5pZCA9ICgnaWQnIGluIGQpID8gZC5pZCBhcyBudW1iZXIgOiAwO1xuICAgICAgICB0aGlzLm9yZGVyID0gKCdvcmRlcicgaW4gZCkgPyBkLm9yZGVyIGFzIG51bWJlciA6IDA7XG4gICAgICAgIHRoaXMuaG9tZSA9ICgnaG9tZScgaW4gZCkgPyBkLmhvbWUgYXMgc3RyaW5nIDogJyc7XG4gICAgICAgIHRoaXMuYXdheSA9ICgnYXdheScgaW4gZCkgPyBkLmF3YXkgYXMgc3RyaW5nIDogJyc7XG4gICAgICAgIHRoaXMuc2NvcmVfaG9tZSA9ICgnc2NvcmVfaG9tZScgaW4gZCkgPyBkLnNjb3JlX2hvbWUgYXMgbnVtYmVyIDogMDtcbiAgICAgICAgdGhpcy5zY29yZV9hd2F5ID0gKCdzY29yZV9hd2F5JyBpbiBkKSA/IGQuc2NvcmVfYXdheSBhcyBudW1iZXIgOiAwO1xuICAgICAgICB0aGlzLmluX3BsYXkgPSAoJ2luX3BsYXknIGluIGQpID8gZC5pbl9wbGF5IGFzIGJvb2xlYW4gOiBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lID0gKCd0aW1lJyBpbiBkKSA/IGQudGltZSBhcyBzdHJpbmcgOiAnJztcbiAgICAgICAgdGhpcy5jb21wZXRpdGlvbiA9ICgnY29tcGV0aXRpb24nIGluIGQpID8gZC5jb21wZXRpdGlvbiBhcyBzdHJpbmcgOiAnJztcbiAgICAgICAgdGhpcy5jb3VudHJ5ID0gKCdjb3VudHJ5JyBpbiBkKSA/IGQuY291bnRyeSBhcyBzdHJpbmcgOiAnJztcbiAgICAgICAgdGhpcy5vcGVuX2RhdGUgPSAoJ29wZW5fZGF0ZScgaW4gZCkgPyBQYXJzZURhdGUoZC5vcGVuX2RhdGUpIDogbmV3IERhdGUoKTtcbiAgICAgICAgdGhpcy53aW5fYmFjayA9ICgnd2luX2JhY2snIGluIGQpID8gZC53aW5fYmFjayBhcyBudW1iZXIgOiAwO1xuICAgICAgICB0aGlzLndpbl9sYXkgPSAoJ3dpbl9sYXknIGluIGQpID8gZC53aW5fbGF5IGFzIG51bWJlciA6IDA7XG4gICAgICAgIHRoaXMubG9zZV9iYWNrID0gKCdsb3NlX2JhY2snIGluIGQpID8gZC5sb3NlX2JhY2sgYXMgbnVtYmVyIDogMDtcbiAgICAgICAgdGhpcy5sb3NlX2xheSA9ICgnbG9zZV9sYXknIGluIGQpID8gZC5sb3NlX2xheSBhcyBudW1iZXIgOiAwO1xuICAgICAgICB0aGlzLmRyYXdfYmFjayA9ICgnZHJhd19iYWNrJyBpbiBkKSA/IGQuZHJhd19iYWNrIGFzIG51bWJlciA6IDA7XG4gICAgICAgIHRoaXMuZHJhd19sYXkgPSAoJ2RyYXdfbGF5JyBpbiBkKSA/IGQuZHJhd19sYXkgYXMgbnVtYmVyIDogMDtcbiAgICAgICAgdGhpcy50b3RhbF9tYXRjaGVkID0gKCd0b3RhbF9tYXRjaGVkJyBpbiBkKSA/IGQudG90YWxfbWF0Y2hlZCBhcyBudW1iZXIgOiAwO1xuICAgICAgICB0aGlzLnRvdGFsX2F2YWlsYWJsZSA9ICgndG90YWxfYXZhaWxhYmxlJyBpbiBkKSA/IGQudG90YWxfYXZhaWxhYmxlIGFzIG51bWJlciA6IDA7XG4gICAgICAgIHRoaXMuZXJyb3IgPSAoJ2Vycm9yJyBpbiBkKSA/IGQuZXJyb3IgYXMgc3RyaW5nIDogJyc7XG4gICAgfVxuXG4gICAgdG9PYmplY3QoKTogYW55IHtcbiAgICAgICAgY29uc3QgY2ZnOiBhbnkgPSB7fTtcbiAgICAgICAgY2ZnLmlkID0gJ251bWJlcic7XG4gICAgICAgIGNmZy5vcmRlciA9ICdudW1iZXInO1xuICAgICAgICBjZmcuc2NvcmVfaG9tZSA9ICdudW1iZXInO1xuICAgICAgICBjZmcuc2NvcmVfYXdheSA9ICdudW1iZXInO1xuICAgICAgICBjZmcub3Blbl9kYXRlID0gJ3N0cmluZyc7XG4gICAgICAgIGNmZy53aW5fYmFjayA9ICdudW1iZXInO1xuICAgICAgICBjZmcud2luX2xheSA9ICdudW1iZXInO1xuICAgICAgICBjZmcubG9zZV9iYWNrID0gJ251bWJlcic7XG4gICAgICAgIGNmZy5sb3NlX2xheSA9ICdudW1iZXInO1xuICAgICAgICBjZmcuZHJhd19iYWNrID0gJ251bWJlcic7XG4gICAgICAgIGNmZy5kcmF3X2xheSA9ICdudW1iZXInO1xuICAgICAgICBjZmcudG90YWxfbWF0Y2hlZCA9ICdudW1iZXInO1xuICAgICAgICBjZmcudG90YWxfYXZhaWxhYmxlID0gJ251bWJlcic7XG4gICAgICAgIHJldHVybiBUb09iamVjdCh0aGlzLCBjZmcpO1xuICAgIH1cblxuICAgIGFwcGx5R2FtZUNoYW5nZXMoYTogR2FtZUNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGEub3JkZXIpXG4gICAgICAgICAgICB0aGlzLm9yZGVyID0gYS5vcmRlcjtcbiAgICAgICAgaWYgKGEuc2NvcmVfaG9tZSlcbiAgICAgICAgICAgIHRoaXMuc2NvcmVfaG9tZSA9IGEuc2NvcmVfaG9tZTtcbiAgICAgICAgaWYgKGEuc2NvcmVfYXdheSlcbiAgICAgICAgICAgIHRoaXMuc2NvcmVfYXdheSA9IGEuc2NvcmVfYXdheTtcbiAgICAgICAgaWYgKGEuaW5fcGxheSlcbiAgICAgICAgICAgIHRoaXMuaW5fcGxheSA9IGEuaW5fcGxheTtcbiAgICAgICAgaWYgKGEudGltZSlcbiAgICAgICAgICAgIHRoaXMudGltZSA9IGEudGltZTtcbiAgICAgICAgaWYgKGEuY29tcGV0aXRpb24pXG4gICAgICAgICAgICB0aGlzLmNvbXBldGl0aW9uID0gYS5jb21wZXRpdGlvbjtcbiAgICAgICAgaWYgKGEuY291bnRyeSlcbiAgICAgICAgICAgIHRoaXMuY291bnRyeSA9IGEuY291bnRyeTtcbiAgICAgICAgaWYgKGEud2luX2JhY2spXG4gICAgICAgICAgICB0aGlzLndpbl9iYWNrID0gYS53aW5fYmFjaztcbiAgICAgICAgaWYgKGEud2luX2xheSlcbiAgICAgICAgICAgIHRoaXMud2luX2xheSA9IGEud2luX2xheTtcbiAgICAgICAgaWYgKGEuZHJhd19iYWNrKVxuICAgICAgICAgICAgdGhpcy5kcmF3X2JhY2sgPSBhLmRyYXdfYmFjaztcbiAgICAgICAgaWYgKGEuZHJhd19sYXkpXG4gICAgICAgICAgICB0aGlzLmRyYXdfbGF5ID0gYS5kcmF3X2xheTtcbiAgICAgICAgaWYgKGEubG9zZV9iYWNrKVxuICAgICAgICAgICAgdGhpcy5sb3NlX2JhY2sgPSBhLmxvc2VfYmFjaztcbiAgICAgICAgaWYgKGEubG9zZV9sYXkpXG4gICAgICAgICAgICB0aGlzLmxvc2VfbGF5ID0gYS5sb3NlX2xheTtcbiAgICAgICAgaWYgKGEudG90YWxfbWF0Y2hlZClcbiAgICAgICAgICAgIHRoaXMudG90YWxfbWF0Y2hlZCA9IGEudG90YWxfbWF0Y2hlZDtcbiAgICAgICAgaWYgKGEudG90YWxfYXZhaWxhYmxlKVxuICAgICAgICAgICAgdGhpcy50b3RhbF9hdmFpbGFibGUgPSBhLnRvdGFsX2F2YWlsYWJsZTtcbiAgICAgICAgaWYgKGEuZXJyb3IpXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gYS5lcnJvcjtcbiAgICB9O1xufVxuXG5cbi8vIHN0cnVjdDJ0czpnaXRodWIuY29tL2ZwYXdlbC9iZXRmYWlycy9mb290YmFsbC9mb290YmFsbDIuR2FtZUNoYW5nZXNcbmV4cG9ydCBjbGFzcyBHYW1lQ2hhbmdlcyB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBvcmRlcjogbnVtYmVyIHwgbnVsbDtcbiAgICBzY29yZV9ob21lOiBudW1iZXIgfCBudWxsO1xuICAgIHNjb3JlX2F3YXk6IG51bWJlciB8IG51bGw7XG4gICAgaW5fcGxheTogYm9vbGVhbiB8IG51bGw7XG4gICAgdGltZTogc3RyaW5nIHwgbnVsbDtcbiAgICBjb21wZXRpdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgICBjb3VudHJ5OiBzdHJpbmcgfCBudWxsO1xuICAgIHdpbl9iYWNrOiBudW1iZXIgfCBudWxsO1xuICAgIHdpbl9sYXk6IG51bWJlciB8IG51bGw7XG4gICAgZHJhd19sYXk6IG51bWJlciB8IG51bGw7XG4gICAgZHJhd19iYWNrOiBudW1iZXIgfCBudWxsO1xuICAgIGxvc2VfbGF5OiBudW1iZXIgfCBudWxsO1xuICAgIGxvc2VfYmFjazogbnVtYmVyIHwgbnVsbDtcbiAgICB0b3RhbF9tYXRjaGVkOiBudW1iZXIgfCBudWxsO1xuICAgIHRvdGFsX2F2YWlsYWJsZTogbnVtYmVyIHwgbnVsbDtcbiAgICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKGRhdGE/OiBhbnkpIHtcbiAgICAgICAgY29uc3QgZDogYW55ID0gKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSA/IFRvT2JqZWN0KGRhdGEpIDoge307XG4gICAgICAgIHRoaXMuaWQgPSAoJ2lkJyBpbiBkKSA/IGQuaWQgYXMgbnVtYmVyIDogMDtcbiAgICAgICAgdGhpcy5vcmRlciA9ICgnb3JkZXInIGluIGQpID8gZC5vcmRlciBhcyBudW1iZXIgOiBudWxsO1xuICAgICAgICB0aGlzLnNjb3JlX2hvbWUgPSAoJ3Njb3JlX2hvbWUnIGluIGQpID8gZC5zY29yZV9ob21lIGFzIG51bWJlciA6IG51bGw7XG4gICAgICAgIHRoaXMuc2NvcmVfYXdheSA9ICgnc2NvcmVfYXdheScgaW4gZCkgPyBkLnNjb3JlX2F3YXkgYXMgbnVtYmVyIDogbnVsbDtcbiAgICAgICAgdGhpcy5pbl9wbGF5ID0gKCdpbl9wbGF5JyBpbiBkKSA/IGQuaW5fcGxheSBhcyBib29sZWFuIDogbnVsbDtcbiAgICAgICAgdGhpcy50aW1lID0gKCd0aW1lJyBpbiBkKSA/IGQudGltZSBhcyBzdHJpbmcgOiBudWxsO1xuICAgICAgICB0aGlzLmNvbXBldGl0aW9uID0gKCdjb21wZXRpdGlvbicgaW4gZCkgPyBkLmNvbXBldGl0aW9uIGFzIHN0cmluZyA6IG51bGw7XG4gICAgICAgIHRoaXMuY291bnRyeSA9ICgnY291bnRyeScgaW4gZCkgPyBkLmNvdW50cnkgYXMgc3RyaW5nIDogbnVsbDtcbiAgICAgICAgdGhpcy53aW5fYmFjayA9ICgnd2luX2JhY2snIGluIGQpID8gZC53aW5fYmFjayBhcyBudW1iZXIgOiBudWxsO1xuICAgICAgICB0aGlzLndpbl9sYXkgPSAoJ3dpbl9sYXknIGluIGQpID8gZC53aW5fbGF5IGFzIG51bWJlciA6IG51bGw7XG4gICAgICAgIHRoaXMuZHJhd19sYXkgPSAoJ2RyYXdfbGF5JyBpbiBkKSA/IGQuZHJhd19sYXkgYXMgbnVtYmVyIDogbnVsbDtcbiAgICAgICAgdGhpcy5kcmF3X2JhY2sgPSAoJ2RyYXdfYmFjaycgaW4gZCkgPyBkLmRyYXdfYmFjayBhcyBudW1iZXIgOiBudWxsO1xuICAgICAgICB0aGlzLmxvc2VfbGF5ID0gKCdsb3NlX2xheScgaW4gZCkgPyBkLmxvc2VfbGF5IGFzIG51bWJlciA6IG51bGw7XG4gICAgICAgIHRoaXMubG9zZV9iYWNrID0gKCdsb3NlX2JhY2snIGluIGQpID8gZC5sb3NlX2JhY2sgYXMgbnVtYmVyIDogbnVsbDtcbiAgICAgICAgdGhpcy50b3RhbF9tYXRjaGVkID0gKCd0b3RhbF9tYXRjaGVkJyBpbiBkKSA/IGQudG90YWxfbWF0Y2hlZCBhcyBudW1iZXIgOiBudWxsO1xuICAgICAgICB0aGlzLnRvdGFsX2F2YWlsYWJsZSA9ICgndG90YWxfYXZhaWxhYmxlJyBpbiBkKSA/IGQudG90YWxfYXZhaWxhYmxlIGFzIG51bWJlciA6IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSAoJ2Vycm9yJyBpbiBkKSA/IGQuZXJyb3IgYXMgc3RyaW5nIDogbnVsbDtcbiAgICB9XG5cbiAgICB0b09iamVjdCgpOiBhbnkge1xuICAgICAgICBjb25zdCBjZmc6IGFueSA9IHt9O1xuICAgICAgICBjZmcuaWQgPSAnbnVtYmVyJztcbiAgICAgICAgY2ZnLm9yZGVyID0gJ251bWJlcic7XG4gICAgICAgIGNmZy5zY29yZV9ob21lID0gJ251bWJlcic7XG4gICAgICAgIGNmZy5zY29yZV9hd2F5ID0gJ251bWJlcic7XG4gICAgICAgIGNmZy53aW5fYmFjayA9ICdudW1iZXInO1xuICAgICAgICBjZmcud2luX2xheSA9ICdudW1iZXInO1xuICAgICAgICBjZmcuZHJhd19sYXkgPSAnbnVtYmVyJztcbiAgICAgICAgY2ZnLmRyYXdfYmFjayA9ICdudW1iZXInO1xuICAgICAgICBjZmcubG9zZV9sYXkgPSAnbnVtYmVyJztcbiAgICAgICAgY2ZnLmxvc2VfYmFjayA9ICdudW1iZXInO1xuICAgICAgICBjZmcudG90YWxfbWF0Y2hlZCA9ICdudW1iZXInO1xuICAgICAgICBjZmcudG90YWxfYXZhaWxhYmxlID0gJ251bWJlcic7XG4gICAgICAgIHJldHVybiBUb09iamVjdCh0aGlzLCBjZmcpO1xuICAgIH1cbn1cblxuXG4vLyBzdHJ1Y3QydHM6Z2l0aHViLmNvbS9mcGF3ZWwvYmV0ZmFpcnMvZm9vdGJhbGwvZm9vdGJhbGwyLkdhbWVzQ2hhbmdlc1xuZXhwb3J0IGNsYXNzIEdhbWVzQ2hhbmdlcyB7XG4gICAgcmVzZXQ6IGJvb2xlYW47XG4gICAgbmV3OiBHYW1lW107XG4gICAgb3V0OiBudW1iZXJbXTtcbiAgICB1cGQ6IEdhbWVDaGFuZ2VzW107XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRhPzogYW55KSB7XG4gICAgICAgIGNvbnN0IGQ6IGFueSA9IChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JykgPyBUb09iamVjdChkYXRhKSA6IHt9O1xuICAgICAgICB0aGlzLnJlc2V0ID0gKCdyZXNldCcgaW4gZCkgPyBkLnJlc2V0IGFzIGJvb2xlYW4gOiBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXcgPSBBcnJheS5pc0FycmF5KGQubmV3KSA/IGQubmV3Lm1hcCgodjogYW55KSA9PiBuZXcgR2FtZSh2KSkgOiBbXTtcbiAgICAgICAgdGhpcy5vdXQgPSAoJ291dCcgaW4gZCkgPyBkLm91dCBhcyBudW1iZXJbXSA6IFtdO1xuICAgICAgICB0aGlzLnVwZCA9IEFycmF5LmlzQXJyYXkoZC51cGQpID8gZC51cGQubWFwKCh2OiBhbnkpID0+IG5ldyBHYW1lQ2hhbmdlcyh2KSkgOiBbXTtcbiAgICB9XG5cbiAgICB0b09iamVjdCgpOiBhbnkge1xuICAgICAgICBjb25zdCBjZmc6IGFueSA9IHt9O1xuICAgICAgICByZXR1cm4gVG9PYmplY3QodGhpcywgY2ZnKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseV9nYW1lc19jaGFuZ2VzKGdhbWVzOiBHYW1lW10sIGdhbWVzQ2hhbmdlczogR2FtZXNDaGFuZ2VzKSB7XG5cbiAgICBpZiAoZ2FtZXNDaGFuZ2VzLnJlc2V0KSB7XG4gICAgICAgIHJldHVybiBnYW1lc0NoYW5nZXMubmV3O1xuICAgIH1cblxuICAgIGNvbnN0IHUgPSBnZXRHYW1lc0NoYW5nZXMoZ2FtZXNDaGFuZ2VzKTtcblxuICAgIGxldCBuZXh0R2FtZXMgPSBnYW1lc0NoYW5nZXMubmV3O1xuXG4gICAgZ2FtZXMuZmlsdGVyKChnYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiAhKHUub3V0LmhhcyhnYW1lLmlkKSB8fCB1Lm5ldy5oYXMoZ2FtZS5pZCkpO1xuICAgIH0pLm1hcCgoZ2FtZSkgPT4ge1xuICAgICAgICBjb25zdCBnYW1lQ2hhbmdlcyA9IHUudXBkLmdldChnYW1lLmlkKTtcbiAgICAgICAgaWYgKGdhbWVDaGFuZ2VzKSB7XG4gICAgICAgICAgICBnYW1lLmFwcGx5R2FtZUNoYW5nZXMoZ2FtZUNoYW5nZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lO1xuICAgIH0pLmZvckVhY2goKGdhbWUpID0+IG5leHRHYW1lcy5wdXNoKGdhbWUpKTtcbiAgICBuZXh0R2FtZXMuc29ydCgoeCwgeSkgPT4geC5vcmRlciAtIHkub3JkZXIpO1xuXG4gICAgbGV0IGlkX2dhbWUgPSBuZXcgTWFwPG51bWJlciwgR2FtZT4oKTtcbiAgICBsZXQgb3JkZXJfZ2FtZSA9IG5ldyBNYXA8bnVtYmVyLCBHYW1lPigpO1xuXG4gICAgZm9yIChsZXQgeCBvZiBuZXh0R2FtZXMpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0R2FtZSA9ICh4OiBHYW1lKSA9PiBgJHt4Lm9yZGVyfSAke3guaG9tZX0gJHt4LmF3YXl9YDtcblxuICAgICAgICBjb25zdCB5ID0gaWRfZ2FtZS5nZXQoeC5pZCk7XG4gICAgICAgIGlmICh5KSB7XG4gICAgICAgICAgICByZXR1cm4gYGFzc2VydCB1bmlxdWUgZ2FtZSBpZDogJHtmb3JtYXRHYW1lKHgpfSBhbmQgJHtmb3JtYXRHYW1lKHkpfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWRfZ2FtZS5zZXQoeC5pZCwgeCk7XG5cbiAgICAgICAgY29uc3QgeiA9IG9yZGVyX2dhbWUuZ2V0KHgub3JkZXIpO1xuICAgICAgICBpZiAoeikge1xuICAgICAgICAgICAgcmV0dXJuIGBhc3NlcnQgdW5pcXVlIGdhbWUgb3JkZXI6ICR7Zm9ybWF0R2FtZSh4KX0gYW5kICR7Zm9ybWF0R2FtZSh6KX1gO1xuICAgICAgICB9XG4gICAgICAgIG9yZGVyX2dhbWUuc2V0KHgub3JkZXIsIHgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0R2FtZXM7XG59XG5cblxuZnVuY3Rpb24gZ2V0R2FtZXNDaGFuZ2VzKHg6IEdhbWVzQ2hhbmdlcykge1xuICAgIGxldCByID0ge1xuICAgICAgICBvdXQ6IG5ldyBTZXQ8bnVtYmVyPigpLFxuICAgICAgICBuZXc6IG5ldyBNYXA8bnVtYmVyLCBHYW1lPigpLFxuICAgICAgICB1cGQ6IG5ldyBNYXA8bnVtYmVyLCBHYW1lQ2hhbmdlcz4oKSxcbiAgICB9O1xuXG5cbiAgICBpZiAoeC5vdXQpIHtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgeC5vdXQpIHtcbiAgICAgICAgICAgIHIub3V0LmFkZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoeC5uZXcpIHtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgeC5uZXcpIHtcbiAgICAgICAgICAgIHIubmV3LnNldCh2YWx1ZS5pZCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHgudXBkKSB7XG4gICAgICAgIGZvciAobGV0IHZhbHVlIG9mIHgudXBkKSB7XG4gICAgICAgICAgICByLnVwZC5zZXQodmFsdWUuaWQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xyXG5pbXBvcnQgeyBGb290YmFsbCB9IGZyb20gXCIuL2NvbXBvbmVudHMvRm9vdGJhbGwvRm9vdGJhbGxcIjtcclxuXHJcblJlYWN0RE9NLnJlbmRlcihcclxuICAgIDxGb290YmFsbCAgLz4sXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKVxyXG4pO1xyXG5cclxuIiwiXG4vLyBoZWxwZXJzXG5jb25zdCBtYXhVbml4VFNJblNlY29uZHMgPSA5OTk5OTk5OTk5O1xuXG5mdW5jdGlvbiBQYXJzZURhdGUoZDogRGF0ZSB8IG51bWJlciB8IHN0cmluZyk6IERhdGUge1xuXHRpZiAoZCBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBkO1xuXHRpZiAodHlwZW9mIGQgPT09ICdudW1iZXInKSB7XG5cdFx0aWYgKGQgPiBtYXhVbml4VFNJblNlY29uZHMpIHJldHVybiBuZXcgRGF0ZShkKTtcblx0XHRyZXR1cm4gbmV3IERhdGUoZCAqIDEwMDApOyAvLyBnbyB0c1xuXHR9XG5cdHJldHVybiBuZXcgRGF0ZShkKTtcbn1cblxuZnVuY3Rpb24gUGFyc2VOdW1iZXIodjogbnVtYmVyIHwgc3RyaW5nLCBpc0ludCA9IGZhbHNlKTogbnVtYmVyIHtcblx0aWYgKCF2KSByZXR1cm4gMDtcblx0aWYgKHR5cGVvZiB2ID09PSAnbnVtYmVyJykgcmV0dXJuIHY7XG5cdHJldHVybiAoaXNJbnQgPyBwYXJzZUludCh2KSA6IHBhcnNlRmxvYXQodikpIHx8IDA7XG59XG5cbmZ1bmN0aW9uIEZyb21BcnJheTxUPihDdG9yOiB7IG5ldyh2OiBhbnkpOiBUIH0sIGRhdGE/OiBhbnlbXSB8IGFueSwgZGVmID0gbnVsbCk6IFRbXSB8IG51bGwge1xuXHRpZiAoIWRhdGEgfHwgIU9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCkgcmV0dXJuIGRlZjtcblx0Y29uc3QgZCA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuXHRyZXR1cm4gZC5tYXAoKHY6IGFueSkgPT4gbmV3IEN0b3IodikpO1xufVxuXG5mdW5jdGlvbiBUb09iamVjdChvOiBhbnksIHR5cGVPckNmZzogYW55ID0ge30sIGNoaWxkID0gZmFsc2UpOiBhbnkge1xuXHRpZiAoIW8pIHJldHVybiBudWxsO1xuXHRpZiAodHlwZW9mIG8udG9PYmplY3QgPT09ICdmdW5jdGlvbicgJiYgY2hpbGQpIHJldHVybiBvLnRvT2JqZWN0KCk7XG5cblx0c3dpdGNoICh0eXBlb2Ygbykge1xuXHRcdGNhc2UgJ3N0cmluZyc6XG5cdFx0XHRyZXR1cm4gdHlwZU9yQ2ZnID09PSAnbnVtYmVyJyA/IFBhcnNlTnVtYmVyKG8pIDogbztcblx0XHRjYXNlICdib29sZWFuJzpcblx0XHRjYXNlICdudW1iZXInOlxuXHRcdFx0cmV0dXJuIG87XG5cdH1cblxuXHRpZiAobyBpbnN0YW5jZW9mIERhdGUpIHtcblx0XHRyZXR1cm4gdHlwZU9yQ2ZnID09PSAnc3RyaW5nJyA/IG8udG9JU09TdHJpbmcoKSA6IE1hdGguZmxvb3Ioby5nZXRUaW1lKCkgLyAxMDAwKTtcblx0fVxuXG5cdGlmIChBcnJheS5pc0FycmF5KG8pKSByZXR1cm4gby5tYXAoKHY6IGFueSkgPT4gVG9PYmplY3QodiwgdHlwZU9yQ2ZnLCB0cnVlKSk7XG5cblx0Y29uc3QgZDogYW55ID0ge307XG5cblx0Zm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKG8pKSB7XG5cdFx0Y29uc3QgdjogYW55ID0gb1trXTtcblx0XHRpZiAoIXYpIGNvbnRpbnVlO1xuXHRcdGRba10gPSBUb09iamVjdCh2LCB0eXBlT3JDZmdba10gfHwge30sIHRydWUpO1xuXHR9XG5cblx0cmV0dXJuIGQ7XG59XG5cbi8vIGNsYXNzZXNcbi8vIGV4cG9ydHNcbmV4cG9ydCB7XG4gICAgbWF4VW5peFRTSW5TZWNvbmRzLFxuXHRQYXJzZURhdGUsXG5cdFBhcnNlTnVtYmVyLFxuXHRGcm9tQXJyYXksXG5cdFRvT2JqZWN0LFxufTtcblxuLy9pbXBvcnQge21heFVuaXhUU0luU2Vjb25kcywgUGFyc2VEYXRlLCBQYXJzZU51bWJlciwgRnJvbUFycmF5LCBUb09iamVjdH0gZnJvbSBcIi4vZ29sYW5nX3R5cGVzY3JpcHRpZnlfaGVscGVyc1wiO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHdlYlNvY2tldFVSTCAodXJpIDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBwcm90byA9IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sLnJlcGxhY2UoXCJodHRwXCIsIFwid3NcIik7XHJcbiAgICByZXR1cm4gYCR7cHJvdG99Ly8ke2RvY3VtZW50LmxvY2F0aW9uLmhvc3R9JHt1cml9YDtcclxufSIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTTsiXSwic291cmNlUm9vdCI6IiJ9\"")
}
